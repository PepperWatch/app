(function(e){function t(t){for(var r,c,o=t[0],s=t[1],u=t[2],l=0,h=[];l<o.length;l++)c=o[l],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function c(e){return o.p+"js/"+({}[e]||e)+".js?_hash="+{"chunk-37e1cd26":"a7bfe373","chunk-d9cf15fa":"4071dbe5","chunk-1a3038a1":"730e7bf7","chunk-e566abec":"41f1a78f","chunk-0315f352":"a8447092","chunk-311890bd":"4791fe4b"}[e]}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=c(e);var u=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",u.name="ChunkLoadError",u.type=r,u.request=a,n[1](u)}i[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0ceb":function(e,t,n){"use strict";n("24f5")},"0d60":function(e,t,n){"use strict";n("9c42")},1:function(e,t){},"10ba":function(e,t,n){"use strict";n("d3b7");var r=n("7a23"),i={class:"q-mt-md q-gutter-md text-center absolute-center"},a=Object(r["k"])("h6",{class:"text-primary"},"Upload .mp4 file",-1),c=Object(r["k"])("p",{class:"text-primary"},"max 20 MB",-1);function o(e,t,n,o,s,u){var l=Object(r["L"])("q-icon");return Object(r["E"])(),Object(r["j"])("div",{class:Object(r["w"])(["uploader text-center relative-position",{dragOver:s.isDragging}]),onClick:t[1]||(t[1]=function(){return u.uploadClick&&u.uploadClick.apply(u,arguments)}),onDragenter:t[2]||(t[2]=function(){return u.dragenter&&u.dragenter.apply(u,arguments)}),onDragover:t[3]||(t[3]=function(){return u.dragover&&u.dragover.apply(u,arguments)}),onDragleave:t[4]||(t[4]=function(){return u.dragleave&&u.dragleave.apply(u,arguments)}),onDrop:t[5]||(t[5]=function(){return u.drop&&u.drop.apply(u,arguments)})},[Object(r["k"])("input",{type:"file",onChange:t[0]||(t[0]=function(){return u.fileToUploadSelected&&u.fileToUploadSelected.apply(u,arguments)}),ref:"fileInput",accept:".mp4"},null,544),Object(r["k"])("div",i,[Object(r["n"])(l,{name:"cloud_upload",class:"text-primary",style:{"font-size":"64px"}}),a,c])],34)}var s=n("b85c"),u=n("d188"),l={name:"Uploader",data:function(){return{dragCounter:0,isDragging:!1}},methods:{sample:function(){var e=this,t=new u["a"]({url:"//commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerMeltdowns.mp4"});this.$emit("file",t),t.prepare().then((function(){e.$emit("filePrepared",t)}))},uploadUserFile:function(e){var t=this,n=20971520;if(e.size>n)this.$q.notify({type:"negative",position:"top-right",message:"Maximum file size is 20 MB"});else{var r=new u["a"]({file:e});this.$emit("file",r),r.prepare().then((function(){t.$emit("filePrepared",r)}))}},fileToUploadSelected:function(e){var t=e.target.files;if(t[0]){var n,r=Object(s["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.uploadUserFile(i)}}catch(a){r.e(a)}finally{r.f()}this.$refs.fileInput.value=null}},uploadClick:function(){this.$refs.fileInput.click()},drop:function(e){if(e.preventDefault(),this.isDragging=!1,e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var n=e.dataTransfer.items[t].getAsFile();this.uploadUserFile(n)}}else for(var r=0;r<e.dataTransfer.files.length;r++)this.uploadUserFile(e.dataTransfer.files[r])},dragenter:function(e){e.dataTransfer&&(this.isDragging=!0,e.stopPropagation(),e.preventDefault(),this.dragCounter++,e.dataTransfer.dropEffect="copy")},dragover:function(e){e.dataTransfer&&(this.isDragging=!0,e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")},dragleave:function(e){e.dataTransfer&&(this.dragCounter--,0===this.dragCounter&&(this.isDragging=!1))}}},d=(n("83c3"),n("6b0d")),h=n.n(d),p=n("0016"),b=n("93dc"),f=n.n(b);const m=h()(l,[["render",o]]);t["a"]=m;f()(l,"components",{QIcon:p["a"]})},"1d19":function(e,t,n){"use strict";var r=n("7a23"),i={class:"relative-position"},a={class:"q-pa-md"},c=Object(r["k"])("div",{class:"text-h6 q-mb-md"},"Original (private)",-1),o={key:0},s={key:0},u=["src"],l={class:"q-pa-md"},d=Object(r["k"])("div",{class:"text-h6 q-mb-md"},"Downsampled (public)",-1),h={class:"q-pa-md"},p={class:"row no-wrap justify-start items-start content-start"},b={class:"self-center col"},f={class:"self-center col-9"},m={class:"absolute-full flex flex-center"},v={key:0,class:"rounded-borders q-pa-md q-my-md bg-negative q-card--bordered text-white"};function g(e,t,n,g,j,O){var w=Object(r["L"])("q-splitter"),k=Object(r["L"])("q-item-section"),y=Object(r["L"])("q-checkbox"),x=Object(r["L"])("q-item"),R=Object(r["L"])("q-icon"),_=Object(r["L"])("q-slider"),P=Object(r["L"])("q-range"),T=Object(r["L"])("q-spinner-gears"),C=Object(r["L"])("q-inner-loading"),S=Object(r["L"])("q-btn"),L=Object(r["L"])("q-badge"),B=Object(r["L"])("q-linear-progress");return Object(r["E"])(),Object(r["j"])(r["a"],null,[Object(r["k"])("div",i,[Object(r["n"])(w,{modelValue:j.splitBy,"onUpdate:modelValue":t[1]||(t[1]=function(e){return j.splitBy=e}),style:{height:"400px"}},{before:Object(r["T"])((function(){return[Object(r["k"])("div",a,[c,n.file?(Object(r["E"])(),Object(r["j"])("div",o,[j.originalVideoBlobURL?(Object(r["E"])(),Object(r["j"])("div",s,[Object(r["k"])("video",{src:j.originalVideoBlobURL,ref:"originalVideoPlayer",muted:"",style:{width:"100%",height:"300px"},controls:""},null,8,u)])):Object(r["i"])("",!0)])):Object(r["i"])("",!0)])]})),after:Object(r["T"])((function(){return[Object(r["k"])("div",l,[d,Object(r["k"])("div",{style:Object(r["x"])(O.previewStyle),onClick:t[0]||(t[0]=function(){return O.areaClick&&O.areaClick.apply(O,arguments)})},null,4)])]})),_:1},8,["modelValue"]),Object(r["n"])(x,null,{default:Object(r["T"])((function(){return[Object(r["n"])(k,{avatar:""}),Object(r["n"])(k,null,{default:Object(r["T"])((function(){return[Object(r["n"])(y,{modelValue:j.appendIntro,"onUpdate:modelValue":t[2]||(t[2]=function(e){return j.appendIntro=e}),label:"Append Intro"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(r["n"])(x,null,{default:Object(r["T"])((function(){return[Object(r["n"])(k,{avatar:""},{default:Object(r["T"])((function(){return[Object(r["n"])(R,{color:"deep-orange",name:"water_drop"})]})),_:1}),Object(r["n"])(k,null,{default:Object(r["T"])((function(){return[Object(r["n"])(_,{modelValue:j.blur,"onUpdate:modelValue":t[3]||(t[3]=function(e){return j.blur=e}),min:0,max:j.maxBlur,step:.01,label:"",color:"deep-orange"},null,8,["modelValue","max","step"])]})),_:1})]})),_:1}),Object(r["n"])(x,null,{default:Object(r["T"])((function(){return[Object(r["n"])(k,{avatar:""},{default:Object(r["T"])((function(){return[Object(r["n"])(R,{name:"schedule"})]})),_:1}),Object(r["n"])(k,null,{default:Object(r["T"])((function(){return[Object(r["n"])(P,{modelValue:j.selection,"onUpdate:modelValue":t[4]||(t[4]=function(e){return j.selection=e}),min:0,step:.01,max:j.maxLength,"drag-range":!0,label:""},null,8,["modelValue","step","max"])]})),_:1})]})),_:1}),Object(r["n"])(C,{showing:j.downloading},{default:Object(r["T"])((function(){return[Object(r["n"])(T,{size:"50px",color:"primary"})]})),_:1},8,["showing"])]),Object(r["k"])("div",h,[Object(r["k"])("div",p,[Object(r["k"])("div",b,[Object(r["n"])(S,{color:"primary",label:n.buttonLabel,loading:j.downloading,onClick:O.download},null,8,["label","loading","onClick"])]),Object(r["k"])("div",f,[j.downloading?(Object(r["E"])(),Object(r["h"])(B,{key:0,size:"25px",value:j.progress},{default:Object(r["T"])((function(){return[Object(r["k"])("div",m,[Object(r["n"])(L,{color:"white","text-color":"primary",label:j.currentStage},null,8,["label"])])]})),_:1},8,["value"])):Object(r["i"])("",!0)])])]),j.hasError?(Object(r["E"])(),Object(r["j"])("div",v," Error processing. Please check the video you are trying to use. Try other settings or other file. If problem persists - contact us. ")):Object(r["i"])("",!0)],64)}var j=n("1da1"),O=(n("96cf"),n("d4ec")),w=n("bee2"),k=(n("d3b7"),n("262e")),y=n("2caf"),x=(n("ac1f"),n("1276"),n("b680"),n("99af"),n("b0c0"),n("c19f"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("2909")),R=(n("fb6a"),n("a1f0"),function(){function e(){var t=this;Object(O["a"])(this,e),this._webWorkerBlobUrl=null,this._worker=null,this._workerReady=!1,this._workerReadyPromiseResolver=null,this._workerReadyPromiseRejecter=null,this._workerReadyPromise=new Promise((function(e,n){t._workerReadyPromiseResolver=e,t._workerReadyPromiseRejecter=n})),this._lastProcessedFrame=0,this._lastErrors=[]}return Object(w["a"])(e,[{key:"log",value:function(e){console.log("MP4 Encoder | ",e)}},{key:"getLastProcessedFrame",value:function(){return this._lastProcessedFrame}},{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return(t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t))&&(t=[{name:"input.mp4",data:t}]),e.next=3,this.initWebWorker();case 3:return r=137438953472,this.log("starting task..."),console.log(n),this._worker.postMessage({type:"run",arguments:n,TOTAL_MEMORY:r,MEMFS:t}),this._videoReadyPromiseResolver=null,this._videoReadyPromiseRejecter=null,this._videoReadyPromise=new Promise((function(e,t){i._videoReadyPromiseResolver=e,i._videoReadyPromiseRejecter=t})),e.next=12,this._videoReadyPromise;case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"messageFromWebworker",value:function(e,t){switch(e){case"ready":this.log("web worker ready."),this._workerReady=!0,this._workerReadyPromiseResolver();break;case"stdout":break;case"stderr":if(console.log(t),t=""+t,this._lastErrors=this._lastErrors.slice(0,4),this._lastErrors.unshift(t),-1!=t.indexOf("frame=")){var n=/frame=[^0-9]+([0-9]+)[^0-9]+/gm,r=Object(x["a"])(t.matchAll(n));r[0]&&r[0][1]&&(this._lastProcessedFrame=parseInt(r[0][1]),this.log("frame: "+this._lastProcessedFrame))}break;case"done":this.log("got encoded file"),t&&t.MEMFS&&t.MEMFS[0]?this._videoReadyPromiseResolver(t.MEMFS[0].data):this._videoReadyPromiseRejecter(this._lastErrors);break;case"exit":this.log("exited: "+t);break}}},{key:"loadWebWorkerCode",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.log("getting web worker..."),t="/ffmpeg-worker-mp4.js",e.next=5,fetch(t);case 5:return n=e.sent,this.log("got web worker."),e.next=9,n.blob();case 9:return r=e.sent,this.log("blob",r),this._webWorkerBlobUrl=window.URL.createObjectURL(r),e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e["catch"](0),console.error(e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"initWebWorker",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._workerReady){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.loadWebWorkerCode();case 4:return this._worker=new Worker(this._webWorkerBlobUrl),this._worker.onmessage=function(e){var n=e.data;t.messageFromWebworker(n.type,n.data)},this.log("web worker installed"),e.next=9,this._workerReadyPromise;case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"getSingleton",value:function(){return e.__singleInstance||(e.__singleInstance=new e),e.__singleInstance}}]),e}()),_=function(){function e(t){var n=t.ab,r=t.filename,i=t.blob,a=t.mp4Encoder,c=t.VideoTask;Object(O["a"])(this,e),Object.assign(this,{ab:n,filename:r,blob:i,mp4Encoder:a,VideoTask:c}),this.mp4Encoder||(this.mp4Encoder=R.getSingleton()),this.inputFiles=[]}return Object(w["a"])(e,[{key:"executeOver",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},n.ab=this._resultAB,e.next=4,this.VideoTask.execute(t,n);case 4:return r=e.sent,this._resultAB=r._resultAB,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"prepareInputs",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]?r[1]:null,this.ab||!this.blob||!this.blob.arrayBuffer){e.next=6;break}return e.next=5,this.blob.arrayBuffer();case 5:this.ab=e.sent;case 6:if(this.ab||!this.blob||!this.blob.file){e.next=10;break}return e.next=9,this.blob.file.arrayBuffer();case 9:this.ab=e.sent;case 10:if(this.ab&&(this.filename?this.inputFiles.push({name:this.filename,data:this.ab}):this.inputFiles.push({name:"input.mp4",data:this.ab})),this.inputFiles.length){e.next=13;break}throw new Error("No input files defined");case 13:t&&(t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?this.inputFiles.push({name:"input2.mp4",data:t}):t._resultAB&&this.inputFiles.push({name:"input2.mp4",data:t._resultAB})),n&&(n instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(n)?this.inputFiles.push({name:"input3.mp4",data:n}):n._resultAB&&this.inputFiles.push({name:"input3.mp4",data:n._resultAB}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"executeOnWorker",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.mp4Encoder.execute(t,n);case 2:return this._resultAB=e.sent,e.abrupt("return",this._resultAB);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"asBlob",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Blob([this._resultAB],{type:"video/mp4"}),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"download",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.asBlob();case 2:return t=e.sent,n=new Response(t,{"Content-Type":"video/mp4","Content-Disposition":"attachment"}),e.next=6,n.blob();case 6:r=e.sent,i=window.URL.createObjectURL(r),a=document.createElement("a"),a.href=i,a.download="test.mp4",document.body.appendChild(a),a.innerHTML="download",a.style.display="none",a.click(),a.remove(),window.URL.revokeObjectURL(i);case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),P=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"secondsToString",value:function(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),i=t-3600*n-60*r,a=(e-i).toFixed(3).split(".")[1];return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i+"."+a}},{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.fromSeconds,r=t.toSeconds,e.next=3,this.prepareInputs();case 3:return i=["-y"].concat(["-ss",this.secondsToString(n)]).concat(["-to",this.secondsToString(r)]).concat(["-i",this.inputFiles[0].name]).concat(["-vf","setsar=1"]).concat(["-vcodec","libx264"]).concat(["-crf","20"]).concat(["-acodec","copy"]).concat(["output.mp4"]),e.next=6,this.executeOnWorker(this.inputFiles,i);case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(_),T=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.radius,r=void 0===n?20:n,e.next=3,this.prepareInputs();case 3:return i=["-y"].concat(["-i",this.inputFiles[0].name]).concat(["-filter_complex","[0:v]avgblur=sizeX="+r+":sizeY="+r+"[blurred]"]).concat(["-map","0:a"]).concat(["-map","[blurred]"]).concat(["output.mp4"]),e.next=6,this.executeOnWorker(this.inputFiles,i);case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(_),C=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.toWidth,r=t.toHeight,e.next=3,this.prepareInputs();case 3:return i=["-y"].concat(["-i",this.inputFiles[0].name]).concat(["-vf","scale='min("+n+",iw)':min'("+r+",ih)':force_original_aspect_ratio=1,pad="+n+":"+r+":-1:-1:color=black"]).concat(["output.mp4"]),e.next=6,this.executeOnWorker(this.inputFiles,i);case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(_),S=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.withVideo,r=t.withVideo2,e.next=3,this.prepareInputs(n,r);case 3:return i=["-y"].concat(["-i",this.inputFiles[0].name]).concat(["-i",this.inputFiles[1].name]),i=r?i.concat(["-i",this.inputFiles[2].name]).concat(["-filter_complex","[1:v]setsar=1[v1];[0:v][0:a][v1][1:a][2:v][2:a]concat=n=3:v=1:a=1[v][a]"]):i.concat(["-filter_complex","[0:v][0:a][1:v][1:a]concat=n=2:v=1:a=1[v][a]"]),i=i.concat(["-vsync","2"]).concat(["-map","[v]"]).concat(["-map","[a]"]).concat(["output.mp4"]),e.next=8,this.executeOnWorker(this.inputFiles,i);case 8:return e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(_),L=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepareInputs();case 2:return t=["-y"].concat(["-i",this.inputFiles[0].name]).concat(["-r","24"]).concat(["output.mp4"]),e.next=5,this.executeOnWorker(this.inputFiles,t);case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),B=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.toWidth,r=t.toHeight,i=t.duration,a=void 0===i?1:i,e.next=3,this.prepareInputs();case 3:return console.log(n,r),c=["-y"].concat(["-loop","1"]).concat(["-i",this.inputFiles[0].name]).concat(["-c:v","libx264"]).concat(["-t",""+a]).concat(["-pix_fmt","yuv420p"]).concat(["-vf","scale="+n+":"+r]).concat(["output.mp4"]),e.next=7,this.executeOnWorker(this.inputFiles,c);case 7:return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(_),U=function(e){Object(k["a"])(n,e);var t=Object(y["a"])(n);function n(e){return Object(O["a"])(this,n),t.call(this,e)}return Object(w["a"])(n,[{key:"execute",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.emptyAudio,e.next=3,this.prepareInputs();case 3:return e.next=5,n.arrayBuffer();case 5:return r=e.sent,this.inputFiles.push({name:"input.mp3",data:r}),i=["-y"].concat(["-i",this.inputFiles[0].name]).concat(["-i",this.inputFiles[1].name]).concat(["-shortest"]).concat(["-c:v","copy"]).concat(["-c:a","aac"]).concat(["output.mp4"]),e.next=10,this.executeOnWorker(this.inputFiles,i);case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(_),A={trim:P,blur:T,scale:C,merge:S,mp4:L,imageVideo:B,emptyAudio:U},E=function(){function e(){Object(O["a"])(this,e)}return Object(w["a"])(e,null,[{key:"execute",value:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(n){var r,i,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},A[n]){t.next=3;break}throw new Error("Invalid taskName: "+n);case 3:return r.VideoTask=e,i=new A[n](r),console.log("VideoTask | Executing "+n+"..."),t.next=8,i.execute(r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}]),e}(),I=(n("4de4"),function(){function e(t){var n=t.blob;if(Object(O["a"])(this,e),Object.assign(this,{blob:n}),!this.blob)throw new Error("blob is requried for downsampling");this.originalWidth=null,this.originalHeight=null,this.originalDuration=null,this.sampleWidth=null,this.sampleHeight=null,this.maxSampleDimension=720,this.blurValue=.01,this.blurFadeValue=20,this.blurFadeDuration=500,this.adjustedBlurFadeDuration=null,this.blobURL=null,this._recordedChunks=[],this._recordedBlob=null,this._finalBlob=null,this._screenshots={}}return Object(w["a"])(e,[{key:"free",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this._source&&(this._source.src="",this._source.load()),this._hiddenPlayer&&(this._hiddenPlayer.src="",this._hiddenPlayer.load()),this.blobURL&&URL.revokeObjectURL(this.blobURL);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"log",value:function(e){console.log("Downsample | ",e)}},{key:"getScreenShotBlob",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=.01*Math.round(t/.01),e.next=3,this.prepare();case 3:return e.next=5,this.seekToTime(t);case 5:return e.next=7,new Promise((function(e){return setTimeout(e,100)}));case 7:return e.next=9,new Promise((function(e,t){try{n._canvas.toBlob((function(t){e(t)}),"image/png")}catch(r){t()}}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getScreenShotURL",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=.1*Math.round(t/.1),!this._screenshots[""+t]){e.next=3;break}return e.abrupt("return",this._screenshots[""+t]);case 3:return console.log("rendering "+t),e.next=6,this.prepare();case 6:return e.next=8,this.seekToTime(t);case 8:return e.next=10,new Promise((function(e){return setTimeout(e,100)}));case 10:return n=this._canvas.toDataURL("image/png"),this._screenshots[""+t]=n,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setBlurSettings",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.blurValue=t,this.blurFadeValue=n,this.blurFadeDuration=r,this._screenshots={};case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"setMaxDimension",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.maxSampleDimension=t,e.next=3,this.createCanvas();case 3:this.recalcPositions();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"prepare",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._preparePromise){e.next=4;break}return e.next=3,this._preparePromise;case 3:return e.abrupt("return",e.sent);case 4:return this._preparePromiseResolver=null,this._preparePromise=new Promise((function(e){t._preparePromiseResolver=e})),e.next=8,this.prepareTheSourceVideo();case 8:return e.next=10,this.createCanvas();case 10:return e.next=12,this.prepareBlobForCanvas();case 12:this._preparePromiseResolver();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateDownsampledVideoAndGetBlob",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.generateDownsamledVideo(t,n);case 2:return r=e.sent,this._finalBlob=new Blob([r],{type:"video/mp4"}),e.abrupt("return",this._finalBlob);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"generateDownsampledVideo",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.next=4,this.recordCanvas();case 4:return this._recordedChunks=[],this._recordedBlob=null,this._finalBlob=null,this._source.play(),this._source.currentTime=t,this._expectedLength=1e3*(n-t),this._expectedLength<2*this.blurFadeDuration?this.adjustedBlurFadeDuration=this._expectedLength/2:this.adjustedBlurFadeDuration=this.blurFadeDuration,e.next=13,new Promise((function(e){var t=function t(){r._source.currentTime>=n&&(r._source.pause(),r._source.removeEventListener("timeupdate",t),r.stopRecording().then((function(){e()})))};r._source.addEventListener("timeupdate",t),r._source.play()}));case 13:return e.abrupt("return",this._recordedBlob);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"seekToTime",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:this._source.play(),this._source.currentTime=t;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createCanvas",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t="TheCanvas",n=document.querySelector("#"+t),n&&(this._canvasInitializedOnWidth!=this.sampleWidth||this._canvasInitializedOnHeight!=this.sampleHeight?(this.log("adjusting the canvas..."),n.remove(),n=null):this.log("re-using the canvas")),n||(this.log("creating the canvas..."),n=document.createElement("canvas"),n.id=t,n.width=this.sampleWidth,n.height=this.sampleHeight,this._canvasInitializedOnWidth=this.sampleWidth,this._canvasInitializedOnHeight=this.sampleHeight,n.style.zIndex=8,n.style.display="none",n.style.position="absolute",n.style.border="1px solid",n.style.top="0px",document.getElementsByTagName("body")[0].appendChild(n),this.log("the canvas created.")),this._canvas=n,this._ctx=this._canvas.getContext("2d");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"recalcPositions",value:function(){this.originalWidth>this.originalHeight?(this.sampleWidth=Math.ceil(this.maxSampleDimension),this.sampleHeight=Math.ceil(this.maxSampleDimension*(this.originalHeight/this.originalWidth))):(this.sampleHeight=Math.ceil(this.maxSampleDimension),this.sampleWidth=Math.ceil(this.maxSampleDimension*(this.originalWidth/this.originalHeight))),this.sampleHeight%2==1&&(this.sampleHeight=this.sampleHeight+1),this.sampleWidth%2==1&&(this.sampleWidth=this.sampleWidth+1),this.log("output dimensions set to "+this.sampleWidth+"x"+this.sampleHeight)}},{key:"prepareTheSourceVideo",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.log("Preparing the source video..."),this.blobURL=window.URL.createObjectURL(this.blob),t=document.createElement("video"),t.loop=!0,t.crossOrigin="anonymous",t.muted=!0,t.src=this.blobURL,e.next=9,new Promise((function(e){t.addEventListener("loadedmetadata",(function(){n.originalWidth=t.videoWidth,n.originalHeight=t.videoHeight,n.originalDuration=t.duration,n.log("Source video prepared, "+n.originalWidth+"x"+n.originalHeight),n.recalcPositions(),e()}),{once:!0}),n._source=t,t.play()}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"prepareBlobForCanvas",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=document.createElement("video"),t.muted=!0,n=this._source,r=n.captureStream&&n.captureStream()||n.mozCaptureStream(),i=function e(){if(a._ctx){if(a.blurValue){var n=a.blurValue,r=(new Date).getTime();if(a._recordStartedAt){if(r<a._recordStartedAt+a.adjustedBlurFadeDuration){var i=(r-a._recordStartedAt)/a.adjustedBlurFadeDuration,c=1-i,o=Math.pow(c,2),s=a.blurFadeValue-a.blurValue;n+=s*o}if(r>a._recordStartedAt+a._expectedLength-a.adjustedBlurFadeDuration){var u=(a._recordStartedAt+a._expectedLength-r)/a.adjustedBlurFadeDuration;u<0&&(u=0);var l=1-u,d=Math.pow(l,2),h=a.blurFadeValue-a.blurValue;n+=h*d}}n=n.toFixed(2),a._ctx.filter="blur("+n+"px)"}a._ctx.drawImage(t,0,0,a.sampleWidth,a.sampleHeight)}requestAnimationFrame(e)},e.next=7,new Promise((function(e){t.addEventListener("loadedmetadata",(function(){requestAnimationFrame(i),e()}),{once:!0}),t.srcObject=r,t.play()}));case 7:this._hiddenPlayer=t;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"recordCanvas",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0,n=this._canvas.captureStream(25),this._mediaRecorder=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp8"}),this._mediaRecorder.start(t),this._recordStartedAt=(new Date).getTime(),this._mediaRecorder.ondataavailable=function(e){r._recordedChunks.push(e.data)};case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"stopRecording",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t._mediaRecorder.onstop=function(){var n=new Blob(t._recordedChunks,{type:"video/webm"});t._recordedBlob=n,t.log("recorded blob"),t._recordStartedAt=null,t._source.pause(),e()},t._mediaRecorder.stop()}));case 2:this._mediaRecorder=null;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()),F=n("d188"),D=(n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4664")),H=D.AwesomeQR,q=function(){function e(){Object(O["a"])(this,e),this.sampleWidth=720,this.sampleHeight=720}return Object(w["a"])(e,[{key:"log",value:function(e){console.log("FinalPart | ",e)}},{key:"generate",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,c,o,s,u,l,d,h,p,b,f,m,v,g,j,O,w,k=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},n=t.originalWidth,r=void 0===n?null:n,i=t.originalHeight,a=void 0===i?null:i,c=t.originalDuration,o=void 0===c?null:c,s=t.originalHash,u=void 0===s?null:s,l="https://pepperwatch.com/",u&&(l="https://pepperwatch.com/v/"+u),d=new H({text:l,size:500}),e.next=6,d.draw();case 6:return h=e.sent,p=this.b64toBlob(h.split(",")[1],"image/png"),b=URL.createObjectURL(p),console.log(b),console.log(h),e.next=13,this.createCanvas();case 13:return this._ctx.fillStyle="black",this._ctx.fillRect(0,0,this.sampleWidth,this.sampleHeight),f=new Image,e.next=18,new Promise((function(e){f.onload=function(){e()},f.src=b}));case 18:return this._ctx.drawImage(f,this.sampleWidth/2-f.width/2,this.sampleHeight/2-f.height/2),this._ctx.fillStyle="white",this._ctx.font="30px sans-serif",this._ctx.textAlign="center",this._ctx.textBaseline="bottom",m=this.sampleHeight/2-f.height/2,this._ctx.fillText("Watch the full video at",this.sampleWidth/2,m),this._ctx.textAlign="center",this._ctx.textBaseline="top",v=this.sampleHeight/2+f.height/2,g="",a&&r&&(g=r+"x"+a),o&&(g+=", "+this.durationToText(o)),this._ctx.fillText(g,this.sampleWidth/2,v),j=this._canvas.toDataURL("image/png"),O=this.b64toBlob(j.split(",")[1],"image/png"),e.next=36,O.arrayBuffer();case 36:return w=e.sent,e.abrupt("return",w);case 38:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"durationToText",value:function(e){var t=Math.ceil(e);if(t<60)return t+" second"+(1!=t?"s":"");var n=Math.round(t/60);if(n<60)return n+" minute"+(1!=n?"s":"");var r=Math.round(n/60);return r+" hour"+(1!=r?"s":"")}},{key:"b64toBlob",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(e),i=[],a=0;a<r.length;a+=n){for(var c=r.slice(a,a+n),o=new Array(c.length),s=0;s<c.length;s++)o[s]=c.charCodeAt(s);var u=new Uint8Array(o);i.push(u)}var l=new Blob(i,{type:t});return l}},{key:"createCanvas",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t="TheFinalCanvas",n=document.querySelector("#"+t),n&&(this._canvasInitializedOnWidth!=this.sampleWidth||this._canvasInitializedOnHeight!=this.sampleHeight?(this.log("adjusting the canvas..."),n.remove(),n=null):this.log("re-using the canvas")),n||(this.log("creating the canvas..."),n=document.createElement("canvas"),n.id=t,n.width=this.sampleWidth,n.height=this.sampleHeight,this._canvasInitializedOnWidth=this.sampleWidth,this._canvasInitializedOnHeight=this.sampleHeight,n.style.zIndex=8,n.style.display="none",n.style.position="absolute",n.style.border="1px solid",n.style.top="0px",document.getElementsByTagName("body")[0].appendChild(n),this.log("the canvas created.")),this._canvas=n,this._ctx=this._canvas.getContext("2d");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),M=function(){function e(t){var n=t.blob,r=t.userFile;if(Object(O["a"])(this,e),Object.assign(this,{blob:n,userFile:r}),!this.blob)throw new Error("blob is requried for downsampling");this.blurValue=.01,this.blurFadeValue=20,this.blurFadeDuration=500,this._videoCanvas=null,this._introLengthInFrames=75,this._outtroLengthInFrames=25}return Object(w["a"])(e,[{key:"free",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._videoCanvas){e.next=3;break}return e.next=3,this._videoCanvas.free();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sampleWidth",get:function(){return this._videoCanvas.sampleWidth}},{key:"sampleHeight",get:function(){return this._videoCanvas.sampleHeight}},{key:"originalWidth",get:function(){return this._videoCanvas.originalWidth}},{key:"originalHeight",get:function(){return this._videoCanvas.originalHeight}},{key:"originalDuration",get:function(){return this._videoCanvas.originalDuration}},{key:"log",value:function(e){console.log("VideoProcessor | ",e)}},{key:"getOriginalHash",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.userFile.hash();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSrcreenShotBlob",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.next=4,this._videoCanvas.getScreenShotBlob(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getScreenShotURL",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.next=4,this._videoCanvas.getScreenShotURL(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raw",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.abrupt("return",this.blob);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"makePreview",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,c,o,s,u,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!(l.length>2&&void 0!==l[2])||l[2],this.expectedStages(5),this.nextStage("Preparing"),e.next=5,this.prepare();case 5:return i=n-t,a=Math.ceil(25*i),e.next=9,this.downsampleVideo(t,n);case 9:if(c=e.sent,r){e.next=14;break}return e.next=13,c.asBlob();case 13:return e.abrupt("return",e.sent);case 14:return e.next=16,this.getFinalPart();case 16:return o=e.sent,s=new F["a"]({url:"/intro.mp4"}),this.nextStage("Loading the intro"),e.next=21,s.prepare();case 21:return this.nextStage("Scaling the intro",this._introLengthInFrames),e.next=24,E.execute("scale",{blob:s,toWidth:this.sampleWidth,toHeight:this.sampleHeight});case 24:return u=e.sent,this.nextStage("Final rendering",this._introLengthInFrames+a),e.next=28,u.executeOver("merge",{withVideo:c,withVideo2:o});case 28:return this.nextStage("Getting results"),e.next=31,u.asBlob();case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"downsampleVideo",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,c,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return r=n-t,i=Math.ceil(25*r),a=this.expectedStages(),this.expectedStages(a+3),c=null,e.prev=7,this.nextStage("Cutting the video",i),e.next=11,E.execute("trim",{blob:this.blob,fromSeconds:t,toSeconds:n});case 11:return c=e.sent,this.nextStage("Scaling the video",i),e.next=15,c.executeOver("scale",{toWidth:this.sampleWidth,toHeight:this.sampleHeight});case 15:if(this.nextStage("Bluring the video",i),!(this.blurValue>=1)){e.next=19;break}return e.next=19,c.executeOver("blur",{radius:this.blurValue});case 19:e.next=39;break;case 21:return e.prev=21,e.t0=e["catch"](7),console.error("method 2"),this.expectedStages(a+3),this.nextStage("Cutting the video",i),e.next=28,this._videoCanvas.generateDownsampledVideo(t,n);case 28:return o=e.sent,this.nextStage("Converting the video",i),e.next=32,E.execute("mp4",{blob:o});case 32:return c=e.sent,s=new F["a"]({url:"/silent.mp3"}),e.next=36,s.prepare();case 36:return this.nextStage("Adjusting the video",this._outtroLengthInFrames),e.next=39,c.executeOver("emptyAudio",{emptyAudio:s.file});case 39:return e.abrupt("return",c);case 40:case"end":return e.stop()}}),e,this,[[7,21]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getFinalPart",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return t=this.expectedStages(),this.expectedStages(t+3),this.nextStage("Generating the outtro",this._outtroLengthInFrames),e.next=7,this.getOriginalHash();case 7:return n=e.sent,r=new q,e.next=11,r.generate({originalHash:n,originalWidth:this.originalWidth,originalHeight:this.originalHeight,originalDuration:this.originalDuration});case 11:return i=e.sent,a=Math.min(this.sampleWidth,this.sampleHeight),e.next=15,E.execute("imageVideo",{ab:i,filename:"image.png",duration:1,toWidth:a,toHeight:a});case 15:return c=e.sent,this.nextStage("Adjusting the outtro",this._outtroLengthInFrames),e.next=19,c.executeOver("scale",{toWidth:this.sampleWidth,toHeight:this.sampleHeight});case 19:return o=new F["a"]({url:"/silent.mp3"}),e.next=22,o.prepare();case 22:return this.nextStage("Adjusting the outtro",this._outtroLengthInFrames),e.next=25,c.executeOver("emptyAudio",{emptyAudio:o.file});case 25:return e.abrupt("return",c);case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"prepare",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._preparePromise){e.next=4;break}return e.next=3,this._preparePromise;case 3:return e.abrupt("return",e.sent);case 4:return this._preparePromiseResolver=null,this._preparePromise=new Promise((function(e){t._preparePromiseResolver=e})),this._videoCanvas=new I({blob:this.blob}),e.next=9,this._videoCanvas.prepare();case 9:this._preparePromiseResolver();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setBlurSettings",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.blurValue=t,this.blurFadeValue=n,this.blurFadeDuration=r,this._videoCanvas&&this._videoCanvas.setBlurSettings(t,n,r);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"setMaxDimension",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.maxSampleDimension=t,this._videoCanvas&&this._videoCanvas.setMaxDimension(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCurrentStage",value:function(){return this._readyStage}},{key:"getWorkerLastProcessedFrame",value:function(){var e=R.getSingleton();return e?e.getLastProcessedFrame():null}},{key:"expectedStages",value:function(e){return e&&(this._expectedStages=e),this._expectedStages}},{key:"nextStage",value:function(e,t){this._currentStage||(this._currentStage=0),this._currentStage++,this._readyStage=e,this._expectedFrames=t||null;var n=R.getSingleton();n&&(n._lastProcessedFrame=null)}},{key:"getReadyPercent",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=0,n=0,r=100/this._expectedStages,t=r*(this._currentStage-1),t<0&&(t=0),this._expectedFrames&&(i=this.getWorkerLastProcessedFrame(),i&&(n=r/this._expectedFrames*(i-1),n<0&&(n=0),n>r&&(n=r))),e.abrupt("return",t+n);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),V={name:"MediaDown",props:{file:Object,buttonLabel:{type:String,default:"Create"}},emits:["blob","screenshotBlob"],data:function(){return{appendIntro:!0,quality:600,blur:.01,maxBlur:20,selection:{min:0,max:1},maxLength:1,splitBy:50,originalVideoBlobURL:null,mediaDownsample:null,videoProcessor:null,timeframeShotURL:null,downloading:!1,hasError:!1,lastProcessedFrame:null,progress:null,currentStage:null}},mounted:function(){var e=this;this.file&&(this.originalVideoBlobURL=this.file.getBlobURL(),this.videoProcessor=new M({blob:this.file.file,userFile:this.file})),setInterval((function(){e.areaClick()}),100),setInterval((function(){var t=e.$refs.originalVideoPlayer;t&&t.readyState>=2&&(e.maxLength=t.duration),t&&(t.currentTime>e.selection.max||t.currentTime<e.selection.min)&&(t.currentTime=e.selection.min),e.videoProcessor&&(e.videoProcessor.getReadyPercent().then((function(t){e.progress=t/100})),e.currentStage=e.videoProcessor.getCurrentStage())}),50)},unmounted:function(){this.videoProcessor&&this.videoProcessor.free()},watch:{file:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.originalVideoBlobURL=this.file.getBlobURL(),this.videoProcessor=new M({blob:this.file.file,userFile:this.file}),setTimeout(Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),1e3);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),quality:function(){},blur:function(){this.videoProcessor.setBlurSettings(this.blur,this.maxBlur,500)}},methods:{download:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.hasError=!1,e.downloading=!0,t.prev=2,t.next=5,e.videoProcessor.getSrcreenShotBlob((e.selection.min+e.selection.max)/2);case 5:return n=t.sent,e.$emit("screenshotBlob",n),t.next=9,e.videoProcessor.makePreview(e.selection.min,e.selection.max,e.appendIntro);case 9:r=t.sent,e.$emit("blob",r),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),console.error(t.t0),e.hasError=!0;case 17:e.downloading=!1;case 18:case"end":return t.stop()}}),t,null,[[2,13]])})))()},areaClick:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.originalVideoPlayer){t.next=2;break}return t.abrupt("return");case 2:return n=e.$refs.originalVideoPlayer.currentTime,t.next=5,e.videoProcessor.getScreenShotURL(n);case 5:e.timeframeShotURL=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},computed:{previewStyle:function(){return'width: 100%; height: 300px; background-image: url("'+this.timeframeShotURL+'"); background-size: contain; background-position: center center; background-repeat: no-repeat'}}},z=n("6b0d"),W=n.n(z),K=n("8562"),Q=n("66e5"),$=n("4074"),N=n("8f8e"),G=n("0016"),Y=n("c1d0"),J=n("7bbf"),Z=n("74f7"),X=n("cf57"),ee=n("9c40"),te=n("6b1d"),ne=n("58a8"),re=n("f09f"),ie=n("93dc"),ae=n.n(ie);const ce=W()(V,[["render",g]]);t["a"]=ce;ae()(V,"components",{QSplitter:K["a"],QItem:Q["a"],QItemSection:$["a"],QCheckbox:N["a"],QIcon:G["a"],QSlider:Y["a"],QRange:J["a"],QInnerLoading:Z["a"],QSpinnerGears:X["a"],QBtn:ee["a"],QLinearProgress:te["a"],QBadge:ne["a"],QCard:re["a"]})},2:function(e,t){},"24f5":function(e,t,n){},"2a70":function(e,t,n){},3029:function(e,t,n){"use strict";n("9d5c")},"3b4a":function(e,t,n){},"3d50":function(e,t,n){},"3da3":function(e,t,n){"use strict";n("7d26")},4221:function(e,t,n){"use strict";n("7b7c")},"50b2":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),i=n("d4ec"),a=n("bee2"),c=(n("96cf"),n("e9c4"),n("a15b"),n("d81d"),n("a630"),n("3ca3"),n("4d90"),n("d3b7"),n("25f0"),n("ddb0"),n("2b3d"),n("9861"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("b680"),n("fb6a"),n("ac1f"),n("1276"),n("d188")),o=n("7e7e"),s=n("fb08"),u=function(){function e(){Object(i["a"])(this,e),this._ipfs=Object(s["create"])({host:"ipfs.infura.io",port:5001,protocol:"https"})}return Object(a["a"])(e,[{key:"log",value:function(e){console.log("IPFS | ",e)}},{key:"upload",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t instanceof Blob)){e.next=4;break}return e.next=3,t.arrayBuffer();case 3:t=e.sent;case 4:return e.next=6,this._ipfs.add(t);case 6:return n=e.sent,e.abrupt("return",""+n.cid);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"getSingleton",value:function(){return e.__singleInstance||(e.__singleInstance=new e),e.__singleInstance}}]),e}(),l=n("e11f"),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.containerUserFile,r=t.indexedDBRecord,a=void 0===r?null:r;Object(i["a"])(this,e),Object.assign(this,{containerUserFile:n,indexedDBRecord:a}),this._mp4=null,this._password="",this.privateUserFile=null,this.id=null,this.encodedBlob=null,this._prepared=!1,this._encodedIPFSHash=null,this._publicThumbIPFSHash=null,this._mintIPFSHash=null,this._encodedSize=0,this._encodedSizeHuman="0B",this._privateBlobURL=null,this._privateThumbBlob=null,this._privateThumbBlobURL=null,this._privateSize=0,this._privateSizeHuman="0B",this._privateDuration=0,this._privateDurationHuman="0:00",this._privateResolution="",this._publicBlobURL=null,this._publicThumbBlob=null,this._publicThumbBlobURL=null,this._publicSize=0,this._publicSizeHuman="0B",this._publicDuration=0,this._publicDurationHuman="0:00",this._publicResolution="",this._title="",this._description="",this._price=null,this._isMinted=!1,this._crypt=new l["a"],this.indexedDBRecord&&this.setFromIndexedDBRecord()}return Object(a["a"])(e,[{key:"getMintJSON",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={name:""+this._title,description:""+this._description,external_url:"https://pepperwatch.com/v/"+this.id,image:"ipfs://"+this._publicThumbIPFSHash,animation_url:"ipfs://"+this._encodedIPFSHash,attributes:[],properties:{pepper_unique:this.id}},t&&(n.properties.contract_address=t),e.abrupt("return",JSON.stringify(n,null,"\t"));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mintOn",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.mintContainer(this);case 2:if(n=e.sent,console.log("minted",n),!n){e.next=9;break}return this._isMinted=!0,this.indexedDBRecord.set("isMinted",this._isMinted),this.indexedDBRecord.save(),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"uploadToIPFS",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.encodedBlob){e.next=3;break}return e.next=3,this.makeEncoded();case 3:return n=u.getSingleton(),e.next=6,n.upload(this.encodedBlob);case 6:return this._encodedIPFSHash=e.sent,e.next=9,this.getPublicThumbBlob();case 9:return r=e.sent,e.next=12,n.upload(r);case 12:return this._publicThumbIPFSHash=e.sent,e.next=15,this.getMintJSON(t);case 15:return i=e.sent,e.next=18,n.upload(i);case 18:this._mintIPFSHash=e.sent,this.indexedDBRecord&&(this.indexedDBRecord.set("ipfsHash",this._encodedIPFSHash),this.indexedDBRecord.set("publicThumbIPFSHash",this._publicThumbIPFSHash),this.indexedDBRecord.set("mintIPFSHash",this._mintIPFSHash),this.indexedDBRecord.set("title",this._title),this.indexedDBRecord.set("description",this._description),this.indexedDBRecord.save());case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setFromIndexedDBRecord",value:function(){if(this.indexedDBRecord){this._publicThumbBlob=this.indexedDBRecord.get("publicThumb",null),this._privateThumbBlob=this.indexedDBRecord.get("privateThumb",null),this._password=this.indexedDBRecord.get("password",null),console.error("this._password",this._password),this._password=this._crypt.hex2u8a(this._password),console.error("this._password",this._password);var e=this.indexedDBRecord.get("publicBlob",null);if(e){var t=new c["a"]({file:e,filename:"video.mp4"});this.containerUserFile=t}var n=this.indexedDBRecord.get("privateBlob",null);if(n){var r=new c["a"]({file:n,filename:"video.mp4"});this.privateUserFile=r}var i=this.indexedDBRecord.get("encodedBlob",null);this.encodedBlob=i,this.id=this.indexedDBRecord.get("uniqId",null),this._encodedIPFSHash=this.indexedDBRecord.get("ipfsHash",null),this._publicThumbIPFSHash=this.indexedDBRecord.get("publicThumbIPFSHash",null),this._mintIPFSHash=this.indexedDBRecord.get("mintIPFSHash",null),this._title=this.indexedDBRecord.get("title",""),this._description=this.indexedDBRecord.get("description",""),this._isMinted=this.indexedDBRecord.get("isMinted",!1),this._price=this.indexedDBRecord.get("price",.01)}}},{key:"setTitle",value:function(e){this._title=e}},{key:"setDescription",value:function(e){this._description=e}},{key:"getTitle",value:function(){return this._title}},{key:"getDescription",value:function(){return this._description}},{key:"setPublicThumbBlob",value:function(e){this._publicThumbBlob=e}},{key:"getIPFSHash",value:function(){return this._encodedIPFSHash}},{key:"getMintIPFSHash",value:function(){return this._mintIPFSHash}},{key:"getPublicThumbIPFSHash",value:function(){return this._publicThumbIPFSHash}},{key:"getEncodedSizeHuman",value:function(){return this._encodedSizeHuman}},{key:"getPrivateSizeHuman",value:function(){return this._privateSizeHuman}},{key:"getPublicSizeHuman",value:function(){return this._publicSizeHuman}},{key:"getPrivateDurationHuman",value:function(){return this._privateDurationHuman}},{key:"getPublicDurationHuman",value:function(){return this._publicDurationHuman}},{key:"getPrivateResolution",value:function(){return this._privateResolution}},{key:"getPublicResolution",value:function(){return this._publicResolution}},{key:"getIsMinted",value:function(){return this._isMinted}},{key:"getPrice",value:function(){return this._price}},{key:"setPrice",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]&&r[1],this._price=t,this.indexedDBRecord.set("price",this._price),n&&this.indexedDBRecord.save();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getKeyAsHex",value:function(){return Array.from(this._password).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}},{key:"getPassword",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._password);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"password",get:function(){return this._password}},{key:"getPublicBlob",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.containerUserFile.file);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicBlobURL",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._publicBlobURL){e.next=2;break}return e.abrupt("return",this._publicBlobURL);case 2:return e.next=4,this.prepare();case 4:return this._publicBlobURL=URL.createObjectURL(this.containerUserFile.file),e.abrupt("return",this._publicBlobURL);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPrivateBlob",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.privateUserFile.file);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPrivateBlobURL",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._privateBlobURL){e.next=2;break}return e.abrupt("return",this._privateBlobURL);case 2:return e.next=4,this.prepare();case 4:return this._privateBlobURL=URL.createObjectURL(this.privateUserFile.file),e.abrupt("return",this._privateBlobURL);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPrivateThumbBlobURL",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.abrupt("return",this._privateThumbBlobURL);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPrivateThumbBlob",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.privateUserFile){e.next=5;break}if(this._privateThumbBlob){e.next=5;break}return e.next=4,this.privateUserFile.getThumbBlob();case 4:this._privateThumbBlob=e.sent;case 5:return e.abrupt("return",this._privateThumbBlob);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicThumbBlobURL",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.abrupt("return",this._publicThumbBlobURL);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicThumbBlob",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.containerUserFile){e.next=5;break}if(this._publicThumbBlob){e.next=5;break}return e.next=4,this.containerUserFile.getThumbBlob();case 4:this._publicThumbBlob=e.sent;case 5:return e.abrupt("return",this._publicThumbBlob);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addToPrepared",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o["a"].getSingleton(),e.next=3,t.add(this);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateRandomKey",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.getRandomValues(new Uint8Array(32)));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateRandomPassword",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=8,n="",r="ABCDEFGHJKMNOPRSTUVWXYZabcdefghjkmnpqrstuvwxyz123456789",i=r.length,a=0;a<t;a++)n+=r.charAt(Math.floor(Math.random()*i));return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"compose",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.generateRandomKey();case 3:t=e.sent;case 4:return this.privateUserFile=n,this._password=t,e.next=8,this.addToPrepared();case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"reCalc",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.meta="",e.next=3,this.getPrivateBlob();case 3:return t=e.sent,e.next=6,this.getPublicBlob();case 6:n=e.sent,this._privateSize=t.size,this._publicSize=n.size,this.encodedBlob?this._encodedSize=this.encodedBlob.size:this._encodedSize=this._publicSize+this._privateSize,this._encodedSizeHuman=this.composeHumanSize(this._encodedSize),this._privateSizeHuman=this.composeHumanSize(this._privateSize),this._publicSizeHuman=this.composeHumanSize(this._publicSize);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"prepare",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._prepared){e.next=2;break}return e.abrupt("return",!0);case 2:if(!this.privateUserFile){e.next=8;break}if(this._privateThumbBlob){e.next=7;break}return e.next=6,this.privateUserFile.getThumbBlob();case 6:this._privateThumbBlob=e.sent;case 7:this._privateThumbBlobURL=URL.createObjectURL(this._privateThumbBlob);case 8:if(!this.containerUserFile){e.next=14;break}if(this._publicThumbBlob){e.next=13;break}return e.next=12,this.containerUserFile.getThumbBlob();case 12:this._publicThumbBlob=e.sent;case 13:this._publicThumbBlobURL=URL.createObjectURL(this._publicThumbBlob);case 14:if(!this.indexedDBRecord){e.next=21;break}this._publicDuration=this.indexedDBRecord.get("publicDuration",0),this._privateDuration=this.indexedDBRecord.get("privateDuration",0),this._publicResolution=this.indexedDBRecord.get("publicWidth",0)+"x"+this.indexedDBRecord.get("publicHeight",0),this._privateResolution=this.indexedDBRecord.get("privateWidth",0)+"x"+this.indexedDBRecord.get("privateHeight",0),e.next=27;break;case 21:return e.next=23,this.containerUserFile.getMediaDuration();case 23:return this._publicDuration=e.sent,e.next=26,this.privateUserFile.getMediaDuration();case 26:this._privateDuration=e.sent;case 27:return this._publicDurationHuman=this.composeHumanDuration(this._publicDuration),this._privateDurationHuman=this.composeHumanDuration(this._privateDuration),e.next=31,this.reCalc();case 31:this._prepared=!0;case 32:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"composeHumanSize",value:function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(0)+" "+["B","kB","MB","GB","TB"][t]}},{key:"composeHumanDuration",value:function(e){return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)}},{key:"makeEncoded",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._mp4){e.next=2;break}return e.abrupt("return",!0);case 2:if(this.containerUserFile&&this.privateUserFile){e.next=4;break}throw new Error("Nothing to encode");case 4:return e.next=6,window.newMP4Steg();case 6:if(t=e.sent,this._password){e.next=11;break}return e.next=10,this.generateRandomKey();case 10:this._password=e.sent;case 11:return console.error("this._password",this._password),t.setKey(this._password),e.next=15,t.loadFile({file:this.containerUserFile.file});case 15:return console.error(t._atoms),n=(""+Math.random()).split("0.").join(""),e.next=19,t.embedFile({file:this.privateUserFile.file,meta:{id:n,meta:this.privateUserFile.meta}});case 19:return this._mp4=t,e.next=22,this._mp4.embed();case 22:return r=e.sent,e.next=25,r.toBlob();case 25:this.encodedBlob=e.sent,this.indexedDBRecord&&(this.indexedDBRecord.set("encodedBlob",this.encodedBlob),this.indexedDBRecord.save());case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"download",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.encodedBlob){e.next=3;break}return e.next=3,this.makeEncoded();case 3:return t=new Response(this.encodedBlob,{"Content-Type":"video/mp4","Content-Disposition":"attachment"}),e.next=6,t.blob();case 6:n=e.sent,r=window.URL.createObjectURL(n),i=document.createElement("a"),i.href=r,i.download="encoded.mp4",document.body.appendChild(i),i.innerHTML="download",i.style.display="none",i.click(),i.remove(),window.URL.revokeObjectURL(r);case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.indexedDBRecord.remove();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cleanUp",value:function(){}}],[{key:"fromIndexedDB",value:function(t){var n=new e({indexedDBRecord:t});return n}}]),e}()},"52b8":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=n("6c02");n("2a70");function a(e,t,n,i,a,c){var o=Object(r["L"])("LayoutDefault");return Object(r["E"])(),Object(r["h"])(o)}function c(e,t,n,i,a,c){var o=Object(r["L"])("Header"),s=Object(r["L"])("RoutedPage"),u=Object(r["L"])("q-page"),l=Object(r["L"])("q-page-container"),d=Object(r["L"])("Footer"),h=Object(r["L"])("q-layout");return Object(r["E"])(),Object(r["h"])(h,{view:"hHh lpR fFf"},{default:Object(r["T"])((function(){return[Object(r["n"])(o),Object(r["n"])(l,null,{default:Object(r["T"])((function(){return[Object(r["n"])(u,{padding:""},{default:Object(r["T"])((function(){return[Object(r["n"])(s)]})),_:1})]})),_:1}),Object(r["n"])(d)]})),_:1})}var o=function(e){return Object(r["H"])("data-v-4c27038c"),e=e(),Object(r["F"])(),e},s=o((function(){return Object(r["k"])("div",{class:"q-pa-sm gt-xs"},null,-1)}));function u(e,t,n,i,a,c){var o=Object(r["L"])("Logo"),u=Object(r["L"])("q-btn"),l=Object(r["L"])("q-space"),d=Object(r["L"])("CryptoAuth"),h=Object(r["L"])("EarningsWidget"),p=Object(r["L"])("MaintenanceSwitcher"),b=Object(r["L"])("q-toolbar"),f=Object(r["L"])("q-header");return Object(r["E"])(),Object(r["h"])(f,{reveal:"","height-hint":"161.59"},{default:Object(r["T"])((function(){return[Object(r["n"])(b,{class:"q-pa-lg q-px-md"},{default:Object(r["T"])((function(){return[Object(r["n"])(o),s,c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(u,{key:0,stretch:"",flat:"",label:"Prepare The Mint",to:"/encode"})),c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(u,{key:1,stretch:"",flat:"",label:"Decode Container",to:"/decode"})),c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(u,{key:2,stretch:"",flat:"",label:"Prepared Mints",to:"/prepared"})),c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(u,{key:3,stretch:"",flat:"",label:"All Minted",to:"/allminted"})),Object(r["n"])(l),c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(d,{key:4})),c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(h,{key:5})),Object(r["n"])(p)]})),_:1})]})),_:1})}var l=function(e){return Object(r["H"])("data-v-444a5960"),e=e(),Object(r["F"])(),e},d=l((function(){return Object(r["k"])("span",{class:"gt-xs"},"Pepper.watch",-1)}));function h(e,t,n,i,a,c){var o=Object(r["L"])("q-avatar"),s=Object(r["L"])("q-chip");return Object(r["E"])(),Object(r["h"])(s,{size:"20px",class:"non-selectable cursor-pointer text-capitalize",square:"",clickable:"",onClick:c.onClick},{default:Object(r["T"])((function(){return[Object(r["n"])(o,{size:"60px"}),d]})),_:1},8,["onClick"])}var p={name:"Logo",components:{},methods:{onClick:function(){this.$router.push("/")}},computed:{}},b=(n("9daa"),n("6b0d")),f=n.n(b),m=n("b047"),v=n("cb32"),g=n("93dc"),j=n.n(g);const O=f()(p,[["render",h],["__scopeId","data-v-444a5960"]]);var w=O;j()(p,"components",{QChip:m["a"],QAvatar:v["a"]});var k=n("9346"),y={key:0,class:"relative-position"},x={class:"text-yellow-6 text-h8"},R=Object(r["m"])("Earnings: ");function _(e,t,n,i,a,c){var o=Object(r["L"])("q-btn"),s=Object(r["L"])("q-icon"),u=Object(r["L"])("q-spinner-bars");return Object(r["E"])(),Object(r["j"])("div",null,[a.signedAddress&&!a.loading?(Object(r["E"])(),Object(r["j"])("div",y,[Object(r["n"])(o,{flat:"",round:"",icon:"sync",onClick:c.refreshEarnings,color:"yellow-6"},null,8,["onClick"]),Object(r["k"])("span",x,[R,Object(r["n"])(s,{color:"yellow-6",name:"circle",size:"20px"}),Object(r["m"])(Object(r["P"])(c.earningsAsLuna),1)]),Object(r["n"])(o,{flat:"",round:"",icon:"call_missed_outgoing",onClick:c.withdraw,color:"yellow-6"},null,8,["onClick"])])):Object(r["i"])("",!0),a.signedAddress&&a.loading?(Object(r["E"])(),Object(r["h"])(u,{key:1,color:"yellow-6",size:"2em"})):Object(r["i"])("",!0)])}var P=n("5530"),T=n("1da1"),C=(n("b680"),n("96cf"),n("5502")),S={name:"EarningsWidget",emits:["connected"],data:function(){return{loading:!0,signedAddress:null,chainType:null,provider:null,earnings:0}},components:{},methods:{withdraw:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.provider=this.$store.getters["blockchain/provider"],!this.provider){e.next=8;break}return this.loading=!0,e.next=5,this.provider.withdraw();case 5:t=e.sent,t&&(this.earnings=0),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshEarnings:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.provider=this.$store.getters["blockchain/provider"],this.signedAddress=this.$store.getters["blockchain/signedAddress"],!this.provider||!this.signedAddress){e.next=7;break}return e.next=5,this.provider.queryContract({query:{get_balance:{addr:this.signedAddress}}});case 5:t=e.sent,t&&t.uluna?(this.earnings=parseInt(t.uluna),this.earnings||(this.earnings=0),this.loading=!1,setInterval((function(){n.earnings+=.1*Math.random()}),200)):this.earnings=0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.refreshEarnings()},watch:{blockchainSession:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.refreshEarnings();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:Object(P["a"])(Object(P["a"])({},Object(C["b"])({blockchainSession:"blockchain/sessionId"})),{},{earningsAsLuna:function(){return(this.earnings/1e6).toFixed(6)}})},L=n("9c40"),B=n("0016"),U=n("a154");const A=f()(S,[["render",_]]);var E=A;j()(S,"components",{QBtn:L["a"],QIcon:B["a"],QSpinnerBars:U["a"]});var I={key:0};function F(e,t,n,i,a,c){var o=Object(r["L"])("q-input");return c.maintenance?(Object(r["E"])(),Object(r["j"])("div",I,[Object(r["n"])(o,{dark:"",borderless:"",modelValue:a.text,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.text=e}),"input-class":"text-right",class:"q-ml-md"},null,8,["modelValue"])])):Object(r["i"])("",!0)}n("a15b"),n("fb6a");var D={name:"MaintenanceSwitcher",data:function(){return{text:""}},watch:{text:function(){"show"==this.text&&this.$store.dispatch("maintenance/disable")}},computed:{maintenance:function(){return this.$store.state.maintenance.maintenance}},components:{},methods:{checkBuffer:function(e){var t=e.slice(-4).join("");"show"==t&&this.$store.dispatch("maintenance/disable")}},mounted:function(){}},H=n("27f9");const q=f()(D,[["render",F]]);var M=q;j()(D,"components",{QInput:H["a"]});var V={name:"Header",components:{Logo:w,CryptoAuth:k["a"],MaintenanceSwitcher:M,EarningsWidget:E},methods:{onLogo:function(){this.$router.push("/")},signIn:function(){this.$store.dispatch("doSignIn")},logOut:function(){this.$store.dispatch("doLogOut")}},computed:{maintenance:function(){return this.$store.state.maintenance.maintenance},sessionUsername:function(){return this.$store.state.sessionUser.me?this.$store.state.sessionUser.me.username:null},sessionInitializing:function(){var e,t,n;return!(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(n=t.sessionUser)||void 0===n||!n.isSessionInitializing)},authenticated:function(){return!!this.$store.state.sessionUser.me}}},z=(n("0ceb"),n("e359")),W=n("65c6"),K=n("2c91"),Q=n("e669"),$=n("58a8"),N=n("05c0"),G=n("eb85"),Y=n("4e73"),J=n("1c1c"),Z=n("66e5"),X=n("4074");const ee=f()(V,[["render",u],["__scopeId","data-v-4c27038c"]]);var te=ee;j()(V,"components",{QHeader:z["a"],QToolbar:W["a"],QBtn:L["a"],QSpace:K["a"],QSpinnerFacebook:Q["a"],QBadge:$["a"],QTooltip:N["a"],QSeparator:G["a"],QAvatar:v["a"],QIcon:B["a"],QMenu:Y["a"],QList:J["a"],QItem:Z["a"],QItemSection:X["a"]});var ne={class:"fit row no-wrap justify-center items-start content-start"};function re(e,t,n,i,a,c){var o=Object(r["L"])("q-btn"),s=Object(r["L"])("q-toolbar-title"),u=Object(r["L"])("q-toolbar"),l=Object(r["L"])("q-footer");return Object(r["E"])(),Object(r["h"])(l,{reveal:""},{default:Object(r["T"])((function(){return[Object(r["n"])(u,null,{default:Object(r["T"])((function(){return[Object(r["n"])(s,null,{default:Object(r["T"])((function(){return[Object(r["k"])("div",ne,[Object(r["n"])(o,{flat:"",type:"a",href:"https://twitter.com/pepper_watch",label:"Twitter"}),Object(r["n"])(o,{flat:"",type:"a",href:"https://t.me/s/pepperwatch",label:"Telegram"}),Object(r["n"])(o,{flat:"",type:"a",href:"https://github.com/PepperWatch",label:"GitHub"})])]})),_:1})]})),_:1})]})),_:1})}var ie={name:"Footer",components:{}},ae=(n("e8ae"),n("7ff0")),ce=n("6ac5");const oe=f()(ie,[["render",re],["__scopeId","data-v-32092167"]]);var se=oe;j()(ie,"components",{QFooter:ae["a"],QToolbar:W["a"],QToolbarTitle:ce["a"],QBtn:L["a"]});var ue={key:0},le={key:1,class:"page_content_container"},de={class:"q-pa-xl relative-position"};function he(e,t,n,i,a,c){var o=Object(r["L"])("router-view"),s=Object(r["L"])("q-inner-loading");return Object(r["E"])(),Object(r["j"])(r["a"],null,[c.maintenance?(Object(r["E"])(),Object(r["j"])("div",ue," Maintentance Mode ")):Object(r["i"])("",!0),c.maintenance?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",le,[Object(r["n"])(o,null,{default:Object(r["T"])((function(e){var t=e.Component;return[Object(r["n"])(r["d"],{name:"fade",mode:"out-in",appear:"",onBeforeEnter:c.afterEnter},{default:Object(r["T"])((function(){return[c.contentViewEnabled?(Object(r["E"])(),Object(r["h"])(Object(r["N"])(t),{key:0,ref:"view"},null,512)):Object(r["i"])("",!0)]})),_:2},1032,["onBeforeEnter"])]})),_:1}),Object(r["n"])(r["d"],{name:"fade",mode:"out-in",appear:""},{default:Object(r["T"])((function(){return[c.contentViewEnabled?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",{key:0,class:"cursor-pointer fixed-center",onClick:t[0]||(t[0]=function(){return c.signIn&&c.signIn.apply(c,arguments)})},[Object(r["k"])("div",de,[Object(r["n"])(s,{showing:"",label:"Sign In Required","label-class":"text-primary",color:"primary",size:"50px"})])]))]})),_:1})]))],64)}var pe={name:"RoutedPage",data:function(){return{title:"Pepper Watch",pageTitle:"",currentRoute:window.location.pathname,authRequired:!1}},computed:{contentViewEnabled:function(){return!(this.authRequired&&!this.$store.state.sessionUser.me)},maintenance:function(){return this.$store.state.maintenance.maintenance}},components:{},watch:{$route:function(){this.authRequired=!1}},methods:{signIn:function(){this.$store.dispatch("doSignIn")},afterEnter:function(){console.error("this.$store.maintenance.state",this.$store.state.maintenance.maintenance),this.$nextTick((function(){this.checkForLayout()}))},checkForLayout:function(){try{var e,t,n=this.$refs.view.$.ctx;this.authRequired=!(null===(e=n.$options)||void 0===e||!e.authRequired),this.pageTitle=null!==(t=n.$options)&&void 0!==t&&t.title?n.$options.title:null,console.log(this.authRequired,"this.authRequired"),this.authRequired&&this.$store.dispatch("requireAuth");var r=(this.pageTitle?this.pageTitle+" @ ":"")+this.title;document.title=r}catch(i){console.error(i)}}},beforeCreate:function(){}},be=(n("3da3"),n("4983")),fe=n("74f7");const me=f()(pe,[["render",he],["__scopeId","data-v-7071c850"]]);var ve=me;j()(pe,"components",{QScrollArea:be["a"],QInnerLoading:fe["a"]});var ge={name:"LayoutDefault",components:{RoutedPage:ve,Header:te,Footer:se}},je=n("4d5a"),Oe=n("09e3"),we=n("9989");const ke=f()(ge,[["render",c]]);var ye=ke;j()(ge,"components",{QLayout:je["a"],QPageContainer:Oe["a"],QPage:we["a"]});var xe={name:"App",components:{LayoutDefault:ye},mounted:function(){this.$store.dispatch("initSession")}};const Re=f()(xe,[["render",a]]);var _e=Re,Pe=(n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319"),n("689e")),Te={};Pe.keys().forEach((function(e){"./index.js"!==e&&(Te[e.replace(/(\.\/|\.vue)/g,"")]=Pe(e))}));var Ce=[];for(var Se in Te)Ce.push({path:Te[Se].default.path,component:Te[Se].default});var Le=Ce,Be=n("bc3a"),Ue=n.n(Be),Ae=n("436b"),Ee=n("18d6"),Ie=n("2a19"),Fe=(n("0ca9"),n("7d6e"),n("e54f"),["pepper.watch","pepperwatch.com","www.pepperwatch.com","www.pepperwatch.com","the-organization-app.herokuapp.com"]),De="pepperwatch.com",He=!1;-1!=Fe.indexOf(document.location.hostname)&&(document.location.hostname==De&&"https:"==document.location.protocol||(window.location="https://"+De+"/"+window.location.pathname),He=!0);var qe={quasar:{config:{brand:{primary:"#800000",secondary:"#26A69A",accent:"#9C27B0",dark:"#1d1d1d",positive:"#21BA45",negative:"#C10015",info:"#31CCEC",warning:"#F2C037"}},plugins:{Dialog:Ae["a"],LocalStorage:Ee["a"],Notify:Ie["a"]}},api:{basePath:He?"https://pepperwatch.com/":"http://localhost:9999/"}},Me=function(e,t){return e.replace(/\/$/,"")+"/"+t.replace(/^\/+/,"")},Ve={namespaced:!0,state:function(){return{baseURL:qe.api.basePath,authCode:!1,querying:!1,requestsCount:0}},mutations:{REQUEST_SENT:function(e){e.requestsCount++,e.querying=!0},REQUEST_SUCCESS:function(e){e.requestsCount--,e.requestsCount||(e.querying=!1)},REQUEST_ERROR:function(e){e.requestsCount--,e.requestsCount||(e.querying=!1)},AUTH_CODE:function(e,t){e.authCode=t}},actions:{get:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,i,a,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,a=t.path,r("REQUEST_SENT"),n.prev=3,c={headers:{}},i.authCode&&(c.headers.authcode=i.authCode),n.next=8,Ue.a.get(Me(i.baseURL,a),c);case 8:return o=n.sent,r("REQUEST_SUCCESS"),n.abrupt("return",o.data);case 13:n.prev=13,n.t0=n["catch"](3),r("REQUEST_ERROR");case 16:return n.abrupt("return",null);case 17:case"end":return n.stop()}}),n,null,[[3,13]])})))()},post:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,i,a,c,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,a=t.path,c=t.data,c=c||{},r("REQUEST_SENT"),n.prev=4,o={headers:{}},i.authCode&&(o.headers.authcode=i.authCode),n.next=9,Ue.a.post(Me(i.baseURL,a),c,o);case 9:return s=n.sent,r("REQUEST_SUCCESS"),n.abrupt("return",s.data);case 14:n.prev=14,n.t0=n["catch"](4),r("REQUEST_ERROR");case 17:return n.abrupt("return",null);case 18:case"end":return n.stop()}}),n,null,[[4,14]])})))()}},getters:{}},ze=n("8d81"),We={state:function(){return{isSessionInititalized:!1,isSessionInitializing:!1,me:!1}},mutations:{INITIALIZING_STATUS:function(e,t){e.isSessionInitializing=t},ME:function(e,t){try{e.me=t,e.isSessionInititalized=!0}catch(n){console.log(n)}}},actions:{requireAuth:function(e){var t=e.dispatch,n=e.state;n.me||t("doSignIn")},initSession:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.dispatch,i=e.state,n("INITIALIZING_STATUS",!0),Ee["a"].has("signedMe")&&Ee["a"].has("signedAuthCode")&&(n("ME",Ee["a"].getItem("signedMe")),n("api/AUTH_CODE",Ee["a"].getItem("signedAuthCode"))),!i.me){t.next=8;break}return t.next=6,r("api/get",{path:"/auth/me"});case 6:a=t.sent,a?n("ME",a):(n("ME",!1),n("api/AUTH_CODE",!1),Ee["a"].set("signedMe",!1),Ee["a"].set("signedAuthCode",!1));case 8:n("INITIALIZING_STATUS",!1);case 9:case"end":return t.stop()}}),t)})))()},doSignIn:function(){},signIn:function(e){var t=arguments;return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,i,a,c,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.dispatch,a=t.length>1&&void 0!==t[1]?t[1]:{},n.next=4,i("api/post",{path:"/auth/nonce"});case 4:if(c=n.sent,!c||!c.nonce){n.next=16;break}return o=c.nonce,n.next=9,i("api/post",{path:"/auth/auth",data:{username:a.username,password:ze(""+o+a.password)}});case 9:if(s=n.sent,!s||!s.me){n.next=15;break}return r("ME",s.me),Ee["a"].set("signedMe",s.me),s.authCode&&(r("api/AUTH_CODE",s.authCode),Ee["a"].set("signedAuthCode",s.authCode)),n.abrupt("return",!0);case 15:return n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n)})))()},doLogOut:function(e){var t=e.commit;t("ME",!1),t("api/AUTH_CODE",!1),Ee["a"].set("signedMe",!1),Ee["a"].set("signedAuthCode",!1)}},getters:{}},Ke={namespaced:!0,state:function(){return{maintenance:!1}},mutations:{MAINTENANCE_OFF:function(e){e.maintenance=!1},MAINTENANCE_ON:function(e){e.maintenance=!0}},actions:{disable:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,console.log(r),n("MAINTENANCE_OFF"),t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})))()}},getters:{maintenance:function(e){return e.maintenance}}},Qe={namespaced:!0,state:function(){return{signedAddress:null,chainType:null,provider:null}},mutations:{SIGNED_ADDRESS:function(e,t){e.signedAddress=t},CHAIN_TYPE:function(e,t){e.chainType=t},PROVIDER:function(e,t){e.provider=t},DISCONNECT:function(e){e.provider=null,e.chainType=null,e.signedAddress=null}},actions:{connected:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,i,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=t.signedAddress,a=t.chainType,c=t.provider,r("SIGNED_ADDRESS",i),r("CHAIN_TYPE",a),r("PROVIDER",c),n.abrupt("return",!0);case 6:case"end":return n.stop()}}),n)})))()},disconnected:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,n("DISCONNECT");case 2:case"end":return t.stop()}}),t)})))()}},getters:{provider:function(e){return e.provider},signedAddress:function(e){return e.signedAddress},chainType:function(e){return e.chainType},sessionId:function(e){return e.signedAddress+"_"+e.chainType}}},$e=Object(C["a"])({modules:{api:Ve,sessionUser:We,maintenance:Ke,blockchain:Qe}}),Ne=$e,Ge=n("b05d"),Ye=Object(i["a"])({history:Object(i["b"])(),routes:Le}),Je=Object(r["g"])(_e).use(Ge["a"],qe.quasar);Je.use(Ne),Je.use(Ye),Je.mount("#app");try{document.querySelector(".preloader").classList.add("ready")}catch(Ze){console.error(Ze)}},6193:function(e,t,n){},"689e":function(e,t,n){var r={"./About.vue":"a1d1","./AllMinted.vue":"d433","./Decode.vue":"fff6","./Encode.vue":"9401","./Home.vue":"bc13","./Minted.vue":"e34b","./Prepared.vue":"dde6","./Sampler.vue":"978c","./Watch.vue":"cbff"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="689e"},"70b4":function(e,t,n){},"70c2":function(e,t,n){"use strict";n("6193")},"7b7c":function(e,t,n){},"7d26":function(e,t,n){},"7e7e":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("b85c"),i=n("1da1"),a=n("d4ec"),c=n("bee2"),o=(n("96cf"),n("ac1f"),n("1276"),n("a15b"),n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d81d"),n("a630"),n("3ca3"),n("6062"),n("ddb0"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.record,r=void 0===n?{}:n,i=t.store,c=void 0===i?null:i;Object(a["a"])(this,e),console.error("IndexedDBRecord",r),Object.assign(this,{record:r,store:c})}return Object(c["a"])(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==this.record[e]?this.record[e]:t}},{key:"set",value:function(e,t){this.record[e]=t}},{key:"save",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.store){e.next=2;break}throw new Error("IndexedDB store is not defined for this record");case 2:return console.error(this.record),e.next=5,this.store.update(this.record);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.store){e.next=2;break}throw new Error("IndexedDB store is not defined for this record");case 2:return e.next=4,this.store.deleteUrl(this.get("url"));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()),s=function(){function e(){Object(a["a"])(this,e),this._db=null,this._cacheName="pepper",this._urlPrefix="/localstore/"}return Object(c["a"])(e,[{key:"open",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._db){e.next=4;break}return e.next=3,this.initDB();case 3:this._db=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"idFromURL",value:function(e){return""+this._urlPrefix+e.split(this._urlPrefix)[1]}},{key:"randomURL",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n||(n=(""+Math.random()).split("0.").join("")),e.abrupt("return",""+this._urlPrefix+n+t);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fileToBlob",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Uint8Array,e.next=4,t.arrayBuffer();case 4:return e.t2=e.sent,e.t3=new e.t1(e.t2),e.t4=[e.t3],e.t5={type:t.type},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initDB",value:function(){var e=this;return new Promise((function(t,n){var r=indexedDB.open(e._cacheName,4);r.onerror=function(){n()},r.onupgradeneeded=function(){var e=r.result;try{e.createObjectStore("files",{keyPath:"url"})}catch(t){console.error(t)}},r.onsuccess=function(){var e=r.result;t(e)}}))}},{key:"store",value:function(){var e=this._db.transaction(["files"],"readwrite");return e.objectStore("files")}},{key:"getAll",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return t=this.store(),e.next=5,new Promise((function(e){var r=t.getAll();r.onerror=function(){e(void 0)},r.onsuccess=function(){var t=r.result.map((function(e){return new o({record:e,store:n})}));e(t)}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"matchFromStore",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.idFromURL(n),e.abrupt("return",new Promise((function(e){var c=t.get(i);c.onerror=function(){e(void 0)},c.onsuccess=function(){var t=new o({record:c.result,store:a});e(t?r?[n,t]:t:void 0)}})));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"matchAll",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=Array.from(new Set(t)),r=this.store(),i=[],a=0,c=n;a<c.length;a++)o=c[a],i.push(this.matchFromStore(r,o,!0));return e.abrupt("return",Promise.all(i));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"match",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.store(),e.next=3,this.matchFromStore(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUrl",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.idFromURL(t),r=this.store(),e.next=4,new Promise((function(e){var t=r.delete(n);t.onerror=function(){console.error(t),e(void 0)},t.onsuccess=function(){console.error(t),e(!0)}}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=this;return new Promise((function(t){e.open().then((function(){var n=e._db.transaction(["files"],"readwrite"),r=n.objectStore("files"),i=r.clear();i.onsuccess=function(){t()}}))}))}},{key:"put",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2?c[2]:void 0,e.next=4,this.open();case 4:return i=this.idFromURL(t),e.next=7,new Promise((function(e){var t=a._db.transaction(["files"],"readwrite"),c=t.objectStore("files"),o=n;o.url=i;try{t.onerror=function(){e(!0)},t.oncomplete=function(){e(!0)};var s=c[r?"put":"add"](o);s.onerror=function(){e(!0)}}catch(u){console.error(u)}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:n={},e.t0=regeneratorRuntime.keys(t);case 4:if((e.t1=e.t0()).done){e.next=13;break}if(r=e.t1.value,!(t[r]instanceof File)){e.next=10;break}return e.next=9,this.fileToBlob(t[r]);case 9:t[r]=e.sent;case 10:n[r]=t[r],e.next=4;break;case 13:return e.next=15,new Promise((function(e){var t=i._db.transaction(["files"],"readwrite"),r=t.objectStore("files");try{t.onerror=function(){e(!0)},t.oncomplete=function(){e(!0)};var a=r.put(n);a.onerror=function(){e(!0)}}catch(c){console.error(c)}}));case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),u=n("50b2"),l=function(){function e(){Object(a["a"])(this,e),this._fileStorage=new s,this._storedRecords=[]}return Object(c["a"])(e,[{key:"records",get:function(){return this._storedRecords}},{key:"add",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,c,o,s,u,l,d,h,p,b,f,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._fileStorage.fileToBlob(t.containerUserFile.file);case 2:return n=e.sent,e.next=5,t.containerUserFile.hash();case 5:return r=e.sent,e.next=8,this._fileStorage.fileToBlob(t.privateUserFile.file);case 8:return i=e.sent,e.next=11,t.privateUserFile.hash();case 11:return a=e.sent,c=a+"_"+r,e.next=15,this._fileStorage.randomURL(".mp4",c);case 15:return o=e.sent,e.next=18,t.privateUserFile.prepare();case 18:return e.next=20,t.getPrivateThumbBlob();case 20:return s=e.sent,e.next=23,t.getPublicThumbBlob();case 23:return u=e.sent,e.next=26,t.getKeyAsHex();case 26:return l=e.sent,e.next=29,t.containerUserFile.getMediaDuration();case 29:return d=e.sent,e.next=32,t.containerUserFile.getMediaWidth();case 32:return h=e.sent,e.next=35,t.containerUserFile.getMediaHeight();case 35:return p=e.sent,e.next=38,t.privateUserFile.getMediaDuration();case 38:return b=e.sent,e.next=41,t.privateUserFile.getMediaWidth();case 41:return f=e.sent,e.next=44,t.privateUserFile.getMediaHeight();case 44:return m=e.sent,v={uniqId:c,privateBlob:i,publicBlob:n,privateThumb:s,publicThumb:u,publicDuration:d,publicWidth:h,publicHeight:p,privateDuration:b,privateWidth:f,privateHeight:m,createdAt:new Date,password:l},console.log("added",v),console.log(o),e.next=50,this._fileStorage.put(o,v,!0);case 50:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restore",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,this._fileStorage.getAll();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t=[];case 10:console.error(t),n=Object(r["a"])(t);try{for(n.s();!(i=n.n()).done;){a=i.value;try{c=u["a"].fromIndexedDB(a),this._storedRecords.push(c)}catch(o){console.error(o)}}}catch(s){n.e(s)}finally{n.f()}console.log(this._storedRecords);case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"getSingleton",value:function(){return e.__singleInstance||(e.__singleInstance=new e),e.__singleInstance}}]),e}()},"83c3":function(e,t,n){"use strict";n("3b4a")},"8b1f":function(e,t,n){"use strict";var r=n("1da1"),i=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("7a23")),a=Object(i["o"])({loader:function(){return Promise.all([n.e("chunk-37e1cd26"),n.e("chunk-d9cf15fa"),n.e("chunk-1a3038a1")]).then(n.bind(null,"04df"))},delay:200,timeout:3e3});window._newMP4StegPromiseResolver=null,window._newMP4StegPromise=new Promise((function(e){window._newMP4StegPromiseResolver=e})),window.newMP4Steg=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window._newMP4StegPromise;case 2:return e.abrupt("return",window.newMP4StegFunc());case 3:case"end":return e.stop()}}),e)}))),t["a"]=a},"8dfb":function(e,t,n){"use strict";n("3d50")},"92a6":function(e,t,n){},9346:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),i={key:0},a={key:0},c={key:1},o={key:1},s=Object(r["m"])("Widthdraw Earnings"),u={key:2},l={key:3};function d(e,t,n,d,h,p){var b=Object(r["L"])("q-icon"),f=Object(r["L"])("q-item-section"),m=Object(r["L"])("q-item"),v=Object(r["L"])("q-list"),g=Object(r["L"])("q-menu"),j=Object(r["L"])("q-btn"),O=Object(r["L"])("q-separator"),w=Object(r["L"])("TerraAsync"),k=Object(r["L"])("MetamaskAsync");return Object(r["E"])(),Object(r["j"])("div",{class:Object(r["w"])({hidden:!n.visible})},[h.signedAddress?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",i,[Object(r["n"])(j,{dense:"",flat:"","no-wrap":""},{default:Object(r["T"])((function(){return[h.selectedPossibleChainName?(Object(r["E"])(),Object(r["j"])("span",a,Object(r["P"])(h.selectedPossibleChainName),1)):Object(r["i"])("",!0),h.selectedPossibleChainName?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("span",c,"Select Blockchain")),Object(r["n"])(b,{name:"arrow_drop_down",size:"26px"}),Object(r["n"])(g,{"auto-close":""},{default:Object(r["T"])((function(){return[Object(r["n"])(v,{dense:""},{default:Object(r["T"])((function(){return[(Object(r["E"])(!0),Object(r["j"])(r["a"],null,Object(r["K"])(h.possibleChains,(function(e){return Object(r["E"])(),Object(r["h"])(m,{clickable:"",class:"GL__menu-link",key:e.name,onClick:function(t){return p.changeChain(e)}},{default:Object(r["T"])((function(){return[Object(r["n"])(f,null,{default:Object(r["T"])((function(){return[Object(r["m"])(Object(r["P"])(e.name),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1})]})),_:1}),Object(r["n"])(j,{stretch:"",flat:"",label:p.providerButtonTittle,loading:h.connecting,onClick:p.connect},null,8,["label","loading","onClick"])])),h.signedAddress?(Object(r["E"])(),Object(r["j"])("div",o,[Object(r["n"])(j,{dense:"",flat:"","no-wrap":""},{default:Object(r["T"])((function(){return[Object(r["m"])(Object(r["P"])(p.displayAddress)+" on "+Object(r["P"])(h.chainType)+" ",1),Object(r["n"])(b,{name:"arrow_drop_down",size:"26px"}),Object(r["n"])(g,{"auto-close":""},{default:Object(r["T"])((function(){return[Object(r["n"])(v,{dense:""},{default:Object(r["T"])((function(){return[Object(r["n"])(m,{class:"GL__menu-link-signed-in"},{default:Object(r["T"])((function(){return[Object(r["n"])(f,null,{default:Object(r["T"])((function(){return[Object(r["m"])(" Connected to "+Object(r["P"])(h.chainType),1)]})),_:1})]})),_:1}),Object(r["n"])(O),Object(r["n"])(m,{clickable:"",class:"GL__menu-link"},{default:Object(r["T"])((function(){return[Object(r["n"])(f,null,{default:Object(r["T"])((function(){return[s]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})])):Object(r["i"])("",!0),h.requested.terra?(Object(r["E"])(),Object(r["j"])("div",u,[Object(r["n"])(w,{ref:"terra",onConnected:p.terraConnected,onLoaded:p.terraLoaded,onError:p.terraError},null,8,["onConnected","onLoaded","onError"])])):Object(r["i"])("",!0),h.requested.metamask?(Object(r["E"])(),Object(r["j"])("div",l,[Object(r["n"])(k,{ref:"metamask",onConnected:p.metamaskConnected,onLoaded:p.metamaskLoaded},null,8,["onConnected","onLoaded"])])):Object(r["i"])("",!0)],2)}var h=n("5530"),p=n("b85c"),b=n("1da1"),f=(n("d3b7"),n("96cf"),n("3ca3"),n("ddb0"),Object(r["o"])({loader:function(){return Promise.all([n.e("chunk-37e1cd26"),n.e("chunk-e566abec"),n.e("chunk-311890bd")]).then(n.bind(null,"6f6b"))},delay:200,timeout:3e3})),m=f,v=Object(r["o"])({loader:function(){return Promise.all([n.e("chunk-37e1cd26"),n.e("chunk-d9cf15fa"),n.e("chunk-e566abec"),n.e("chunk-0315f352")]).then(n.bind(null,"857f"))},delay:200,timeout:15e3}),g=v,j=n("5502"),O={name:"CryptoAuth",emits:["connected","loaded"],props:{visible:{type:Boolean,default:!0}},data:function(){return{signedAddress:null,chainType:null,possibleChains:[{name:"Terra Testnet",provider:"terra",default:!0,netId:"testnet"}],selectedPossibleChain:null,selectedPossibleChainName:null,connecting:!1,metamask:null,terra:null,provider:null,loaded:{terra:!1,metamask:!1},requested:{terra:!1,metamask:!1}}},components:{TerraAsync:m,MetamaskAsync:g},methods:{request:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("terra"!=e){n.next=6;break}return n.next=3,t.requestTerra();case 3:return n.abrupt("return",n.sent);case 6:if("metamask"!=e){n.next=10;break}return n.next=9,t.requestMetamask();case 9:return n.abrupt("return",n.sent);case 10:case"end":return n.stop()}}),n)})))()},requestTerra:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loaded.terra){t.next=2;break}return t.abrupt("return",!0);case 2:return e.__requestPromiseTerraResolver=null,e.__requestPromiseTerra=new Promise((function(t){e.__requestPromiseTerraResolver=t})),e.requested.terra=!0,t.next=7,e.__requestPromiseTerra;case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},requestMetamask:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loaded.metamask){t.next=2;break}return t.abrupt("return",!0);case 2:return e.__requestPromiseMetamaskResolver=null,e.__requestPromiseMetamask=new Promise((function(t){e.__requestPromiseMetamaskResolver=t})),e.requested.metamask=!0,t.next=7,e.__requestPromiseMetamask;case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},terraLoaded:function(e){this.loaded.terra=!0,this.__requestPromiseTerraResolver&&this.__requestPromiseTerraResolver(),this.$emit("loaded",e)},metamaskLoaded:function(){this.loaded.metamask=!0,this.__requestPromiseMetamaskResolver&&this.__requestPromiseMetamaskResolver()},changeChain:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.error("chainging chain to ",e),t.selectedPossibleChain=e,t.selectedPossibleChainName=e.name;case 3:case"end":return n.stop()}}),n)})))()},terraConnected:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var r,i,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.error("terra conencted"),console.error(e),t.terra=e,t.provider=e,t.signedAddress=t.terra.connectedAddress,t.chainType=t.terra.connectedNetName,r=!1,i=Object(p["a"])(t.possibleChains);try{for(i.s();!(a=i.n()).done;)c=a.value,"terra"==c.provider&&c.netId==t.chainType&&(r=!0)}catch(o){i.e(o)}finally{i.f()}r?(t.$store.dispatch("blockchain/connected",{signedAddress:t.signedAddress,chainType:t.chainType,provider:t.terra}),t.$emit("connected",t.terra)):(t.terra.disconnect(),t.terra=null,t.provider=null,t.signedAddress=null,t.connecting=!1,t.$q.notify({type:"negative",position:"top-right",message:"The chain "+t.chainType+" is not yet supported. Please switch to testnet in Extension and connect again."}),t.chainType=null);case 10:case"end":return n.stop()}}),n)})))()},terraError:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.notify({type:"negative",position:"top-right",message:"Can not connect to TerraStation Browser Extension. Is it installed?"}),e.connecting=!1,e.terra=null,e.provider=null,e.signedAddress=null,e.chainType=null;case 6:case"end":return t.stop()}}),t)})))()},metamaskConnected:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.error("metamask conencted"),t.metamask=e,t.provider=e,t.signedAddress=t.metamask.connectedAddress,t.chainType=t.metamask.connectedNetName,t.$emit("connected",t.metamask);case 6:case"end":return n.stop()}}),n)})))()},connect:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connecting=!0,t.next=3,e.request(e.selectedPossibleChain.provider);case 3:return t.next=5,e.$refs[e.selectedPossibleChain.provider].connect();case 5:case"end":return t.stop()}}),t)})))()},disconnect:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connecting=!1,e.$refs[e.selectedPossibleChain.provider].disconnect(),e.signedAddress=null,e.chainType=null,e.provider=null;case 5:case"end":return t.stop()}}),t)})))()},checkTheStore:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$store.getters["blockchain/signedAddress"],e.signedAddress!=n&&(e.signedAddress=n,e.chainType=e.$store.getters["blockchain/chainType"],e.provider=e.$store.getters["blockchain/provider"],e.signedAddress&&e.$nextTick((function(){e.$emit("connected",e.provider)})));case 2:case"end":return t.stop()}}),t)})))()},getProvider:function(){return this.provider}},mounted:function(){var e,t=Object(p["a"])(this.possibleChains);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.default&&(this.selectedPossibleChain=n,this.selectedPossibleChainName=n.name)}}catch(r){t.e(r)}finally{t.f()}this.checkTheStore()},watch:{blockchainSession:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.checkTheStore();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:Object(h["a"])(Object(h["a"])({},Object(j["b"])({blockchainSession:"blockchain/sessionId"})),{},{displayAddress:function(){return(""+this.signedAddress).substr(0,10)+"..."+(""+this.signedAddress).substr(-5)},providerButtonTittle:function(){if(this.selectedPossibleChain){if("metamask"==this.selectedPossibleChain.provider)return"Connect with Metamask";if("terra"==this.selectedPossibleChain.provider)return"Connect with Terra Station"}return""}})},w=n("6b0d"),k=n.n(w),y=n("9c40"),x=n("0016"),R=n("4e73"),_=n("1c1c"),P=n("66e5"),T=n("4074"),C=n("eb85"),S=n("93dc"),L=n.n(S);const B=k()(O,[["render",d]]);t["a"]=B;L()(O,"components",{QBtn:y["a"],QIcon:x["a"],QMenu:R["a"],QList:_["a"],QItem:P["a"],QItemSection:T["a"],QSeparator:C["a"]})},9401:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=function(e){return Object(r["H"])("data-v-07da6316"),e=e(),Object(r["F"])(),e},a=i((function(){return Object(r["k"])("h6",null,"Prepare The Mint",-1)})),c=i((function(){return Object(r["k"])("p",null,"Upload the video file you want to mint as NFT.",-1)})),o=i((function(){return Object(r["k"])("p",null,"The system will let you extract the copy of it to be available to check out and watch publicly for anybody, while keeping the rest (full-length high resolution original content) to paying watchers.",-1)})),s=i((function(){return Object(r["k"])("p",null,"You are free to mint it as NFT on Blockchain or download and distribute in traditional ways.",-1)})),u=i((function(){return Object(r["k"])("p",null,"Select the part of video you want to be available for public watching for free.",-1)})),l=i((function(){return Object(r["k"])("p",null,"And adjust blur settings if you want to reduce the quality.",-1)})),d=i((function(){return Object(r["k"])("p",null,"Encoding is time-consuming process, please let it few minutes to do its job. We are doing all calculations and ciphering in your browser window, nothing is sent to our servers, your privacy is important.",-1)})),h=Object(r["m"])(" Check everything is fine: "),p={class:"q-pa-md row items-start q-gutter-md"},b=Object(r["m"])(" Encode content into container ");function f(e,t,n,i,f,m){var v=Object(r["L"])("Uploader"),g=Object(r["L"])("q-btn"),j=Object(r["L"])("q-step"),O=Object(r["L"])("MediaDown"),w=Object(r["L"])("UserFilePreview"),k=Object(r["L"])("q-stepper-navigation"),y=Object(r["L"])("q-stepper");return Object(r["E"])(),Object(r["j"])("div",null,[a,Object(r["n"])(y,{modelValue:f.step,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.step=e}),vertical:"",color:"primary","active-icon":"tune",animated:""},{default:Object(r["T"])((function(){return[Object(r["n"])(j,{name:0,title:"Upload the video file",icon:"cloud_upload",done:f.step>0},{default:Object(r["T"])((function(){return[c,o,s,Object(r["n"])(v,{onFilePrepared:m.filePrepared,ref:"originalUploader"},null,8,["onFilePrepared"]),Object(r["n"])(g,{color:"primary",label:"Or Use The Sample Video",onClick:m.useSample},null,8,["onClick"])]})),_:1},8,["done"]),Object(r["n"])(j,{name:1,title:"Prepare the public part",icon:"cloud_upload",done:f.step>1},{default:Object(r["T"])((function(){return[u,l,Object(r["n"])(O,{file:f.selectedFile,onBlob:m.containerPrepared,onScreenshotBlob:m.screenshotPrepared},null,8,["file","onBlob","onScreenshotBlob"]),d]})),_:1},8,["done"]),Object(r["n"])(j,{name:2,title:"Check it",icon:"preview",caption:"",done:f.step>2},{default:Object(r["T"])((function(){return[h,Object(r["k"])("div",p,[Object(r["n"])(w,{label:"Container",userFile:f.selectedContainer},null,8,["userFile"]),Object(r["n"])(w,{label:"Content",userFile:f.selectedFile},null,8,["userFile"])]),Object(r["n"])(k,null,{default:Object(r["T"])((function(){return[Object(r["n"])(g,{onClick:t[0]||(t[0]=function(e){return f.step=3}),color:"primary",label:"Continue"})]})),_:1})]})),_:1},8,["done"]),Object(r["n"])(j,{name:3,title:"Encode",icon:"enhanced_encryption",done:f.step>3},{default:Object(r["T"])((function(){return[b,Object(r["n"])(k,null,{default:Object(r["T"])((function(){return[Object(r["n"])(g,{onClick:m.doEncode,color:"primary",label:"Encode",loading:f.encoding},null,8,["onClick","loading"])]})),_:1})]})),_:1},8,["done"]),Object(r["n"])(j,{name:4,title:"Download container",icon:"file_download",done:f.step>4},{default:Object(r["T"])((function(){return[Object(r["n"])(k,null,{default:Object(r["T"])((function(){return[Object(r["n"])(g,{color:"primary",label:"Go To Prepared Mints",to:"/prepared"})]})),_:1})]})),_:1},8,["done"])]})),_:1},8,["modelValue"])])}var m=n("10ba"),v={class:"absolute-bottom text-subtitle2 text-center"};function g(e,t,n,i,a,c){var o=Object(r["L"])("q-img"),s=Object(r["L"])("q-card");return Object(r["E"])(),Object(r["h"])(s,{class:"my-card"},{default:Object(r["T"])((function(){return[Object(r["n"])(o,{src:a.previewImage},{default:Object(r["T"])((function(){return[Object(r["k"])("div",v,Object(r["P"])(n.label)+" ("+Object(r["P"])(n.userFile.humanSize)+") ",1)]})),_:1},8,["src"])]})),_:1})}var j={name:"UserFilePreview",props:{label:String,userFile:Object},data:function(){return{humanSize:"",previewImage:"none"}},mounted:function(){var e=this;this.userFile.prepare().then((function(){e.humanSize=e.userFile.humanSize,e.previewImage=e.userFile.thumbURL}))},watch:{"userFile.thumbURL":function(){}},methods:{},computed:{}},O=(n("70c2"),n("6b0d")),w=n.n(O),k=n("f09f"),y=n("068f"),x=n("93dc"),R=n.n(x);const _=w()(j,[["render",g]]);var P=_;R()(j,"components",{QCard:k["a"],QImg:y["a"]});var T=n("d188"),C=n("1d19"),S={name:"Encode",path:"/encode",title:"Prepare The Mint",authRequired:!1,props:{},components:{Uploader:m["a"],UserFilePreview:P,MediaDown:C["a"]},data:function(){return{isActive:!1,step:0,selectedFile:null,selectedContainer:null,processedContainer:null,screenshotBlob:null,userContainerPassword:null,downloading:!1,encoding:!1}},watch:{},methods:{useSample:function(){this.$refs.originalUploader.sample()},filePrepared:function(e){this.selectedFile=e,this.selectedFile.hash().then((function(e){console.error("hash",e)})),this.step=1},screenshotPrepared:function(e){this.screenshotBlob=e},containerPrepared:function(e){var t=new T["a"]({file:e,filename:"container.mp4",size:e.size});this.selectedContainer=t,this.step=2},fileUploaded:function(e){this.uploadedFile=e,this.step=2},doEncode:function(){var e=this;this.encoding=!0,this.processedContainer=this.selectedContainer.toContainer(),this.screenshotBlob&&this.processedContainer.setPublicThumbBlob(this.screenshotBlob),this.processedContainer.compose(null,this.selectedFile).then((function(){e.encoding=!1,e.userContainerPassword=e.processedContainer.getKeyAsHex(),e.step=4}))},doDownload:function(){var e=this;this.downloading=!0,this.processedContainer.download().then((function(){e.downloading=!1}))}},mounted:function(){}},L=(n("dd1a"),n("f531")),B=n("87fe"),U=n("9c40"),A=n("b19c");const E=w()(S,[["render",f],["__scopeId","data-v-07da6316"]]);t["default"]=E;R()(S,"components",{QStepper:L["a"],QStep:B["a"],QBtn:U["a"],QStepperNavigation:A["a"]})},"95af":function(e,t,n){"use strict";n("9a90")},"978c":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=function(e){return Object(r["H"])("data-v-6e49e75e"),e=e(),Object(r["F"])(),e},a=i((function(){return Object(r["k"])("h6",null,"Create Sample",-1)})),c={key:0};function o(e,t,n,i,o,s){var u=Object(r["L"])("Uploader"),l=Object(r["L"])("q-btn"),d=Object(r["L"])("MediaDown");return Object(r["E"])(),Object(r["j"])("div",null,[a,o.selectedFile?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",c,[Object(r["n"])(u,{ref:"uploader",onFilePrepared:s.file},null,8,["onFilePrepared"]),Object(r["n"])(l,{color:"primary",label:"Or Use The Sample Video",onClick:s.useSample},null,8,["onClick"])])),Object(r["n"])(d,{file:o.selectedFile},null,8,["file"])])}var s=n("10ba"),u=n("1d19"),l={name:"Sampler",path:"/sampler",title:"Sample Creation",authRequired:!1,props:{},components:{Uploader:s["a"],MediaDown:u["a"]},data:function(){return{isActive:!1,selectedFile:null}},watch:{},methods:{useSample:function(){this.$refs.uploader.sample()},file:function(e){this.selectedFile=e,console.error(e.file)}},mounted:function(){}},d=(n("3029"),n("6b0d")),h=n.n(d),p=n("9c40"),b=n("93dc"),f=n.n(b);const m=h()(l,[["render",o],["__scopeId","data-v-6e49e75e"]]);t["default"]=m;f()(l,"components",{QBtn:p["a"]})},"9a90":function(e,t,n){},"9c42":function(e,t,n){},"9d5c":function(e,t,n){},"9daa":function(e,t,n){"use strict";n("70b4")},a1d1:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["k"])("h2",null,"Abo2ut",-1),a=Object(r["m"])("Home"),c=Object(r["l"])("<p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p><p>Hi there!</p>",12),o=Object(r["m"])("Home");function s(e,t,n,s,u,l){var d=Object(r["L"])("router-link");return Object(r["E"])(),Object(r["j"])("div",null,[i,Object(r["n"])(d,{to:"/"},{default:Object(r["T"])((function(){return[a]})),_:1}),c,Object(r["n"])(d,{to:"/"},{default:Object(r["T"])((function(){return[o]})),_:1})])}var u={name:"About",title:"About Us",authRequired:!0,path:"/about",props:{},data:function(){return{isActive:!1}},methods:{},mounted:function(){}},l=n("6b0d"),d=n.n(l);const h=d()(u,[["render",s]]);t["default"]=h},a59c:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("1da1"),i=n("d4ec"),a=n("bee2"),c=(n("b680"),n("96cf"),n("d188")),o=n("e11f"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.containerUserFile,r=t.file;Object(i["a"])(this,e),Object.assign(this,{containerUserFile:n,file:r}),!this.containerUserFile&&this.file&&(this.containerUserFile=new c["a"]({file:this.file})),this._mp4=null,this._key="",this._decodedBlob=null,this._containerBlob=null,this.containerUserFile&&(this._containerBlob=this.containerUserFile.file)}return Object(a["a"])(e,[{key:"setKey",value:function(e){if("string"===typeof e||e instanceof String){var t=new o["a"];e=t.hex2u8a(e)}this._key=e}},{key:"containerBlob",get:function(){return this._containerBlob}},{key:"decodedBlob",get:function(){return this._decodedBlob}},{key:"prepare",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"decode",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setKey(t),this._decodedBlob=null,e.prev=2,e.next=5,window.newMP4Steg();case 5:return this._mp4=e.sent,this._mp4.setKey(this._key),console.error("this._key",this._key),e.next=10,this._mp4.loadFile({file:this.containerUserFile.file});case 10:if(n=this._mp4.getEmbedFiles(),!n||!n.length){e.next=24;break}r=0;case 13:if(!(r<n.length)){e.next=24;break}return e.next=16,this._mp4.extractFile(r);case 16:return i=e.sent,e.next=19,i.toBlob();case 19:a=e.sent,this._decodedBlob=a;case 21:r++,e.next=13;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](2),console.error(e.t0);case 29:if(console.error(this._decodedBlob),!this._decodedBlob){e.next=32;break}return e.abrupt("return",!0);case 32:return e.abrupt("return",!1);case 33:case"end":return e.stop()}}),e,this,[[2,26]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"composeHumanSize",value:function(){var e=Math.floor(Math.log(this.size)/Math.log(1024));this.humanSize=1*(this.size/Math.pow(1024,e)).toFixed(0)+" "+["B","kB","MB","GB","TB"][e]}}]),e}()},b8d3:function(e,t,n){"use strict";n("52b8")},bc13:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i={class:"video_container"},a=Object(r["l"])('<h5 class="text-primary">PepperWatch - Pay Per View NFT</h5><h6 class="text-primary">What is PepperWatch?</h6><p>Platform to create, mint and manage pay per view video NFTs</p><h6 class="text-primary">Are you talking about unlockable content that lives off-chain?</h6><p>No, actually. It&#39;s unlockable, but everything is on-chain. Both public and private versions are stored on the same ipfs file. Downloadable and may be distributed over any transport. Blockchain cryptography algorithms used to extract private media so it may be watched once purchased.</p><h6 class="text-primary">What? How?</h6><p>PepperWatch uses a sort of steganography to encode the private part of the video inside the public one. Playable in any media player, it has private media encoded inside.</p><h6 class="text-primary">Is it easy to prepare video files for minting?</h6>',8),c=Object(r["m"])("We have a UI for this. "),o=Object(r["m"])("Upload the video file"),s=Object(r["m"])(" you want to mint, and it will create public and private versions for you in the browser. Will take a few minutes."),u=Object(r["k"])("h6",{class:"text-primary"},"Is it free to test?",-1),l=Object(r["m"])("Yep! Absolutely. Check it out. "),d=Object(r["k"])("a",{href:"https://chrome.google.com/webstore/detail/terra-station/aiifbnbfobpmeekipheeijimdpnlpgpp?hl=en",target:"_blank"},"Install Terra Station",-1),h=Object(r["m"])(" browser extension. Create a wallet. "),p=Object(r["k"])("a",{href:"https://faucet.terra.money/",target:"_blank"},"Get some test Luna",-1),b=Object(r["m"])(" for free. And "),f=Object(r["m"])("purchase a video"),m=Object(r["m"])(" or "),v=Object(r["m"])("create your own NFT"),g=Object(r["m"])("."),j=Object(r["k"])("h6",{class:"text-primary"},"What is the economy behind?",-1),O=Object(r["k"])("p",null,"We are still working on it. Currently it's:",-1),w=Object(r["k"])("p",null,"NFT owner can set any price she/he thinks is appropriate for a view.",-1),k=Object(r["k"])("p",null,[Object(r["m"])(" NFT owner receives 80%"),Object(r["k"])("br"),Object(r["m"])(" NFT creator receives 10%"),Object(r["k"])("br"),Object(r["m"])(" PepperWatch receives 10%"),Object(r["k"])("br")],-1),y=Object(r["k"])("p",null,"So you keep 90% of your NFT earnings if you never sell or transfer it.",-1),x=Object(r["k"])("h6",{class:"text-primary"},"Is PepperWatch production ready and stable?",-1),R=Object(r["k"])("p",null,"We are currently in alpha. Working with Terra testnet blockchain. Very close to deploying it to mainnet. Subscribe on twitter and telegram to never miss the launch.",-1);function _(e,t,n,_,P,T){var C=Object(r["L"])("q-video"),S=Object(r["L"])("router-link");return Object(r["E"])(),Object(r["j"])("div",null,[Object(r["k"])("div",i,[Object(r["n"])(C,{ratio:16/9,src:"https://www.youtube.com/embed/92-T5ZBGZcA"})]),a,Object(r["k"])("p",null,[c,Object(r["n"])(S,{to:"/encode"},{default:Object(r["T"])((function(){return[o]})),_:1}),s]),u,Object(r["k"])("p",null,[l,d,h,p,b,Object(r["n"])(S,{to:"/v/Qmek5dVVVxD4oYFJwtfb4YKqcHsEkMF3sfD6wAf5asK3mA"},{default:Object(r["T"])((function(){return[f]})),_:1}),m,Object(r["n"])(S,{to:"/encode"},{default:Object(r["T"])((function(){return[v]})),_:1}),g]),j,O,w,k,y,x,R])}var P={name:"Home",path:"/",props:{},components:{},data:function(){return{}},watch:{},methods:{file:function(){}},mounted:function(){setTimeout((function(){}),500)}},T=(n("4221"),n("6b0d")),C=n.n(T),S=n("6ac0"),L=n("93dc"),B=n.n(L);const U=C()(P,[["render",_]]);t["default"]=U;B()(P,"components",{QVideo:S["a"]})},c52f:function(e,t,n){},cbff:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i={class:"relative-position"},a={class:"row"},c={class:"col-8"},o={key:0,class:"q-py-md"},s={key:1,class:"q-py-md"},u={class:"rounded-borders q-pa-md q-my-md bg-light-blue-1 q-card--bordered"},l=Object(r["m"])("No media found"),d=Object(r["k"])("p",null,"Hash not found or media has not been deployed to IPFS yet.",-1),h={class:"col-4"},p={class:"q-pa-md"},b={key:0,class:"q-pb-sm"},f={key:1},m={class:"text-yellow-10 text-h6"},v={key:2,class:"q-pt-sm"},g={key:0},j=Object(r["m"])(" This NFT has hidden media. You need a key to view it "),O={key:1},w=Object(r["m"])(" You are watching NFT hidden media "),k={key:2},y={class:"row no-wrap items-left q-gutter-sm"},x={key:0},R={class:"row no-wrap items-left q-gutter-sm"},_={key:3,class:"relative-position"},P={key:0,class:"q-pt-sm"},T={key:1,class:"q-pt-sm"},C={key:2,class:"q-pt-sm"},S={key:3,class:"q-pt-sm"},L={key:4,class:"q-pt-sm"},B={key:5,class:"q-pt-sm"},U={key:0},A=Object(r["k"])("p",{class:"text-caption text-grey"},"The step of actual purchase. User notifies our servers user are going to purchase. user sends transaction to blockchain. Our servers publish personalPublicDecodeKey on blockchain after successful purchase. User gets personalPublicDecodeKey from blockchain.",-1),E={key:6,class:"q-pt-sm"},I=Object(r["k"])("p",{class:"text-caption text-grey"},"This data is safe to be stored on Blockchain. As it may be used to decode original video only with user's private key (handled by Metamask or Terra Station)",-1),F={key:7,class:"q-pt-sm"},D={key:8,class:"q-pt-sm"},H=Object(r["k"])("p",{class:"text-caption text-grey"},"This one decoded by Metamask/TerraStation. Value is unique for each user address, but it's enough data to decrypt video. Should be stored in browser only.",-1),q={key:9,class:"q-pt-sm"};function M(e,t,n,M,V,z){var W=Object(r["L"])("q-video"),K=Object(r["L"])("q-icon"),Q=Object(r["L"])("q-separator"),$=Object(r["L"])("q-btn"),N=Object(r["L"])("q-space"),G=Object(r["L"])("q-input"),Y=Object(r["L"])("q-inner-loading"),J=Object(r["L"])("CryptoAuth"),Z=Object(r["L"])("q-spinner-gears"),X=Object(r["L"])("MP4StegAsync");return Object(r["E"])(),Object(r["j"])("div",i,[Object(r["k"])("h6",null,Object(r["P"])(V.videoTitle),1),Object(r["k"])("div",a,[Object(r["k"])("div",c,[V.videoURL?(Object(r["E"])(),Object(r["j"])("div",o,[Object(r["n"])(W,{src:V.videoURL,ratio:16/9},null,8,["src"])])):Object(r["i"])("",!0),V.videoURL||V.initializing?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",s,[Object(r["k"])("div",u,[Object(r["k"])("h5",null,[Object(r["n"])(K,{size:"32px",name:"info",color:"red"}),l]),d])]))]),Object(r["k"])("div",h,[Object(r["k"])("div",p,[V.videoDescription?(Object(r["E"])(),Object(r["j"])("div",b,[Object(r["m"])(Object(r["P"])(V.videoDescription)+" ",1),Object(r["n"])(Q)])):Object(r["i"])("",!0),V.price?(Object(r["E"])(),Object(r["j"])("div",f,[Object(r["k"])("span",m,[Object(r["n"])(K,{color:"yellow-10",name:"circle",size:"25px"}),Object(r["m"])(" "+Object(r["P"])(z.priceAsLuna)+" LUNA",1)])])):Object(r["i"])("",!0),V.mintIpfsHash&&!V.gettingFromBlockchain?(Object(r["E"])(),Object(r["j"])("div",v,[V.viewingDecoded?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("p",g,[Object(r["n"])(K,{name:"lock",color:"primary",size:"20px"}),j])),V.viewingDecoded?(Object(r["E"])(),Object(r["j"])("p",O,[Object(r["n"])(K,{name:"lock_clock",color:"primary",size:"20px"}),w])):Object(r["i"])("",!0),V.viewingDecoded?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",k,[Object(r["k"])("div",y,[V.userHaveAKey?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])($,{key:0,stretch:"",color:"primary",label:"Already have one?",onClick:z.haveAKey},null,8,["onClick"])),V.userHaveAKey?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])($,{key:1,disable:!V.isOkOnAPI,stretch:"",color:"primary",label:"Get it from Blockchain",onClick:z.getFromBlockchain},null,8,["disable","onClick"])),Object(r["n"])(N)]),V.userHaveAKey?(Object(r["E"])(),Object(r["j"])("div",x,[Object(r["n"])(G,{modelValue:V.userKey,"onUpdate:modelValue":t[0]||(t[0]=function(e){return V.userKey=e}),filled:"",type:"text",label:"Key Password",borderless:"",error:V.userKeyError},null,8,["modelValue","error"]),Object(r["k"])("div",R,[Object(r["n"])($,{stretch:"",color:"primary",label:"Check Hidden Content",loading:V.decoding,onClick:z.decodeByUserKey},null,8,["loading","onClick"]),Object(r["n"])($,{stretch:"",color:"primary",label:"I Don't :(",disabled:V.decoding,onClick:z.dontHaveAKey},null,8,["disabled","onClick"]),Object(r["n"])(N)])])):Object(r["i"])("",!0)]))])):Object(r["i"])("",!0),V.gettingFromBlockchain?(Object(r["E"])(),Object(r["j"])("div",_,[Object(r["n"])(Y,{showing:V.initializingBlockchain,color:"primary"},null,8,["showing"]),V.mintIpfsHash?(Object(r["E"])(),Object(r["j"])("div",P,[Object(r["n"])(G,{modelValue:V.mintIpfsHash,"onUpdate:modelValue":t[1]||(t[1]=function(e){return V.mintIpfsHash=e}),filled:"",type:"textarea",label:"Mint IPFS Hash",autogrow:"",borderless:"",disable:""},null,8,["modelValue"])])):Object(r["i"])("",!0),V.mintIpfsHash?(Object(r["E"])(),Object(r["j"])("div",T,[Object(r["n"])(J,{onConnected:z.connectedToBlockchain},null,8,["onConnected"])])):Object(r["i"])("",!0),V.connectedAddress?(Object(r["E"])(),Object(r["j"])("div",C,[Object(r["n"])(G,{modelValue:V.connectedAddress,"onUpdate:modelValue":t[2]||(t[2]=function(e){return V.connectedAddress=e}),filled:"",type:"textarea",label:"Current User Address",autogrow:"",borderless:"",disable:""},null,8,["modelValue"])])):Object(r["i"])("",!0),V.connectedAddress&&!V.encryptionPublicKey?(Object(r["E"])(),Object(r["j"])("div",S,[Object(r["n"])($,{stretch:"",color:"primary",label:"Generate Public Key",onClick:z.askForPublicKey},null,8,["onClick"])])):Object(r["i"])("",!0),V.encryptionPublicKey?(Object(r["E"])(),Object(r["j"])("div",L,[Object(r["n"])(G,{modelValue:V.encryptionPublicKey,"onUpdate:modelValue":t[3]||(t[3]=function(e){return V.encryptionPublicKey=e}),filled:"",type:"textarea",label:"Current User Public Key",autogrow:"",borderless:"",disable:""},null,8,["modelValue"])])):Object(r["i"])("",!0),V.encryptionPublicKey?(Object(r["E"])(),Object(r["j"])("div",B,[Object(r["n"])($,{stretch:"",color:"primary",label:"Do Purchase",loading:V.purchasing,onClick:z.emulatePurchase,disable:!!V.personalPublicDecodeKey},null,8,["loading","onClick","disable"]),V.personalPublicDecodeKey?(Object(r["E"])(),Object(r["j"])("span",U,"  – already purchased")):Object(r["i"])("",!0),A,Object(r["n"])(Q)])):Object(r["i"])("",!0),V.personalPublicDecodeKey?(Object(r["E"])(),Object(r["j"])("div",E,[Object(r["n"])(G,{modelValue:V.personalPublicDecodeKey,"onUpdate:modelValue":t[4]||(t[4]=function(e){return V.personalPublicDecodeKey=e}),filled:"",label:"Per Account Public Decode Key",borderless:"",disable:"",dense:""},null,8,["modelValue"]),I])):Object(r["i"])("",!0),V.personalPublicDecodeKey?(Object(r["E"])(),Object(r["j"])("div",F,[Object(r["n"])($,{stretch:"",color:"primary",label:"Decode The Key",onClick:z.decodeTheKey},null,8,["onClick"])])):Object(r["i"])("",!0),V.personalPrivateDecodeKey?(Object(r["E"])(),Object(r["j"])("div",D,[Object(r["n"])(G,{modelValue:V.personalPrivateDecodeKey,"onUpdate:modelValue":t[5]||(t[5]=function(e){return V.personalPrivateDecodeKey=e}),filled:"",type:"textarea",label:"Per Account Private Decode Key",autogrow:"",borderless:"",disable:""},null,8,["modelValue"]),H,Object(r["n"])(Q)])):Object(r["i"])("",!0),V.videoViewKey?(Object(r["E"])(),Object(r["j"])("div",q,[Object(r["n"])(G,{modelValue:V.videoViewKey,"onUpdate:modelValue":t[6]||(t[6]=function(e){return V.videoViewKey=e}),filled:"",type:"textarea",label:"Per Account Private Key",autogrow:"",borderless:"",disable:""},null,8,["modelValue"]),Object(r["n"])(Q),Object(r["n"])($,{stretch:"",color:"primary",label:"Show Private Media",loading:V.showingPrivate,onClick:z.showPrivate},null,8,["loading","onClick"])])):Object(r["i"])("",!0)])):Object(r["i"])("",!0)])])]),Object(r["n"])(Y,{showing:V.initializing},{default:Object(r["T"])((function(){return[Object(r["n"])(Z,{size:"50px",color:"primary"})]})),_:1},8,["showing"]),Object(r["n"])(X),Object(r["n"])(J,{onLoaded:z.providerLoaded,ref:"publicCryptoAuth",visible:!1},null,8,["onLoaded"])])}var V=n("5530"),z=n("1da1"),W=(n("d3b7"),n("b680"),n("96cf"),n("d4ec")),K=n("bee2"),Q=(n("b0c0"),n("a4d3"),n("e01a"),n("fb6a"),n("ac1f"),n("1276"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("a59c")),$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.$store;Object(W["a"])(this,e),Object.assign(this,{$store:n}),this._serverData={},this._videoHash=null,this._mintIpfsHash=null,this._contractAddress=null,this._isOkOnAPI=!1}return Object(K["a"])(e,[{key:"isOkOnAPI",get:function(){return this._isOkOnAPI}},{key:"getVideoHash",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._videoHash);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPepperUnique",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pepper_unique);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getContractAddress",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._contractAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getVideoURL",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.error(this._serverData,"serverData"),!this._serverData||!this._serverData.encodedIpfsHash){e.next=3;break}return e.abrupt("return","https://ipfs.infura.io/ipfs/"+this._serverData.encodedIpfsHash);case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getVideoTitle",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._serverData||!this._serverData.name){e.next=2;break}return e.abrupt("return",this._serverData.name);case 2:return e.abrupt("return","Watch");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getVideoDescription",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._serverData||!this._serverData.description){e.next=2;break}return e.abrupt("return",this._serverData.description);case 2:return e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"serverData",get:function(){return this._serverData}},{key:"loadInfoByHash",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._videoHash=t,this._mintIpfsHash=t,-1!==t.indexOf("_")){e.next=13;break}return n=new Request("https://ipfs.infura.io/ipfs/"+t),e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.json();case 9:return i=e.sent,console.error("json",i),i&&(i.properties&&i.properties.pepper_unique&&(this._videoHash=i.properties.pepper_unique),i.properties&&i.properties.contract_address&&(this._contractAddress=i.properties.contract_address),i.animation_url&&(this._serverData.encodedIpfsHash=i.animation_url.split("/").slice(-1)[0]),i.name&&(this._serverData.name=i.name),i.description&&(this._serverData.description=i.description),this._isOkOnAPI=!0),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDecodedVideoURL",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,c,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._decodedBlobURL){e.next=2;break}return e.abrupt("return",this._decodedBlobURL);case 2:return e.prev=2,e.next=5,this.getVideoURL();case 5:return n=e.sent,e.next=8,fetch(n);case 8:return r=e.sent,e.next=11,r.blob();case 11:return i=e.sent,i.name="video.mp4",a=new Q["a"]({file:i}),e.next=16,a.decode(t);case 16:if(!a.decodedBlob){e.next=24;break}return c=new Response(a.decodedBlob,{headers:{"Content-Type":"video/mp4"}}),e.next=20,c.blob();case 20:return o=e.sent,s=window.URL.createObjectURL(o),this._decodedBlobURL=s,e.abrupt("return",s);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](2),console.error(e.t0);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,this,[[2,26]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),N=n("e11f"),G=n("9346"),Y=n("8b1f"),J=n("5502"),Z={name:"Watch",path:"/v/:hash",title:"Watch",authRequired:!1,props:{},components:{CryptoAuth:G["a"],MP4StegAsync:Y["a"]},data:function(){return{isActive:!1,viewer:null,initializing:!0,initializingBlockchain:!1,decoding:!1,viewingDecoded:!1,userHaveAKey:!1,userKey:"",userKeyError:!1,gettingFromBlockchain:!1,mintIpfsHash:null,videoURL:null,videoTitle:null,videoDescription:null,videoHash:null,expectedContractAddress:null,connectedAddress:null,encryptionPublicKey:null,blockchainProvider:null,purchasing:!1,personalPublicDecodeKey:null,personalPrivateDecodeKey:null,videoViewKey:null,showingPrivate:!1,price:null,defaultPrice:1e6,isOkOnAPI:!1}},watch:{blockchainSession:function(){this.getVideoInfo()}},methods:{getFromBlockchain:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.videoViewKey=null,e.gettingFromBlockchain=!0;case 2:case"end":return t.stop()}}),t)})))()},dontHaveAKey:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userHaveAKey=!1;case 1:case"end":return t.stop()}}),t)})))()},haveAKey:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userHaveAKey=!0;case 1:case"end":return t.stop()}}),t)})))()},decodeByUserKey:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.decoding=!0,e.videoViewKey=e.userKey,t.next=4,e.showPrivate();case 4:n=t.sent,n?e.viewingDecoded=!0:(e.userKeyError=!0,setTimeout((function(){e.userKeyError=!1}),1e3)),e.decoding=!1;case 7:case"end":return t.stop()}}),t)})))()},showPrivate:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showingPrivate=!0,t.next=3,e.viewer.getDecodedVideoURL(e.videoViewKey);case 3:if(n=t.sent,!n){t.next=7;break}return e.videoURL=n,t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},decodeTheVideoKey:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new N["a"],t.next=3,n.decode(e.personalPrivateDecodeKey,e.connectedAddress);case 3:e.videoViewKey=t.sent;case 4:case"end":return t.stop()}}),t)})))()},decodeTheKey:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.blockchainProvider.decryptMessage(e.personalPublicDecodeKey);case 2:return e.personalPrivateDecodeKey=t.sent,t.next=5,e.decodeTheVideoKey();case 5:case"end":return t.stop()}}),t)})))()},emulatePurchase:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.purchasing=!0,n=e.defaultPrice,e.price&&(n=e.price),t.next=5,e.blockchainProvider.doPurchase(e.mintIpfsHash,n);case 5:return console.log("asking validator to check blockchain..."),r={path:"/fill",data:{userAccount:e.connectedAddress,media:e.mintIpfsHash,contract:e.blockchainProvider.contractAddress}},t.next=9,e.$store.dispatch("api/post",r);case 9:if(i=t.sent,!i||!i.txhash){t.next=14;break}return console.log("validator notified us about her transaction: "+i.txhash),t.next=14,e.blockchainProvider.waitForTransaction(i.txhash);case 14:return t.next=16,e.blockchainProvider.getPrivateKey(e.mintIpfsHash);case 16:return a=t.sent,e.personalPublicDecodeKey=a,t.next=20,e.decodeTheKey();case 20:e.purchasing=!1;case 21:case"end":return t.stop()}}),t)})))()},askForPublicKey:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.blockchainProvider.getEncryptionPublicKey();case 2:e.encryptionPublicKey=t.sent;case 3:case"end":return t.stop()}}),t)})))()},connectedToBlockchain:function(e){var t=this;return Object(z["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.initializingBlockchain=!0,t.connectedAddress=e.connectedAddress,t.blockchainProvider=e,t.getVideoInfo();case 4:case"end":return n.stop()}}),n)})))()},providerLoaded:function(e){var t=this;return Object(z["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.setContractAddressIfAvaialble(),n.next=3,t.getVideoPublicInfo(e);case 3:case"end":return n.stop()}}),n)})))()},getVideoPublicInfo:function(e){var t=this;return Object(z["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t._initializationPromise;case 3:if(t.expectedContractAddress){n.next=8;break}return n.next=6,e.guessContractAddressByTokenId(t.mintIpfsHash);case 6:r=n.sent,r&&(t.expectedContractAddress=r);case 8:return e.setContractAddressIfAvaialble(t.expectedContractAddress),n.next=11,e.queryContract({query:{nft_info:{token_id:t.mintIpfsHash}},contractAddress:t.expectedContractAddress});case 11:i=n.sent,i&&i.extension&&i.extension.watch_price&&(t.price=parseInt(i.extension.watch_price,10)),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](0),console.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))()},getVideoInfo:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$store.getters["blockchain/provider"],e.blockchainProvider=n,!e.blockchainProvider){t.next=25;break}if(e.expectedContractAddress){t.next=8;break}return t.next=6,e.blockchainProvider.guessContractAddressByTokenId(e.mintIpfsHash);case 6:r=t.sent,r&&(e.expectedContractAddress=r);case 8:return e.connectedAddress=n.connectedAddress,t.next=11,e.blockchainProvider.queryContract({query:{nft_info:{token_id:e.mintIpfsHash}}});case 11:if(i=t.sent,i&&i.extension&&i.extension.watch_price&&(e.price=parseInt(i.extension.watch_price,10)),!e.blockchainProvider.hasEncryptionPublicKey()){t.next=17;break}return t.next=16,e.blockchainProvider.getEncryptionPublicKey();case 16:e.encryptionPublicKey=t.sent;case 17:return t.next=19,e.blockchainProvider.getPrivateKey(e.mintIpfsHash);case 19:if(a=t.sent,!a){t.next=24;break}return e.personalPublicDecodeKey=a,t.next=24,e.decodeTheKey();case 24:e.initializingBlockchain=!1;case 25:case"end":return t.stop()}}),t)})))()},initialize:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e._initializationPromiseResolver=null,e._initializationPromise=new Promise((function(t){e._initializationPromiseResolver=t})),e.mintIpfsHash=e.$route.params.hash,e.viewer=new $({$store:e.$store}),t.prev=4,t.next=7,e.viewer.loadInfoByHash(e.mintIpfsHash);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](4),console.error(t.t0);case 12:return e.isOkOnAPI=e.viewer.isOkOnAPI,t.next=15,e.viewer.getVideoURL();case 15:return e.videoURL=t.sent,t.next=18,e.viewer.getVideoTitle();case 18:return e.videoTitle=t.sent,t.next=21,e.viewer.getVideoDescription();case 21:return e.videoDescription=t.sent,t.next=24,e.viewer.getVideoHash();case 24:return e.videoHash=t.sent,t.next=27,e.viewer.getContractAddress();case 27:return e.expectedContractAddress=t.sent,t.prev=28,t.next=31,e.getVideoInfo();case 31:t.next=36;break;case 33:t.prev=33,t.t1=t["catch"](28),console.error(t.t1);case 36:e.initializing=!1,e._initializationPromiseResolver();case 38:case"end":return t.stop()}}),t,null,[[4,9],[28,33]])})))()}},mounted:function(){this.initialize();var e=this.$store.getters["blockchain/provider"];e||this.$refs.publicCryptoAuth.requestTerra()},computed:Object(V["a"])(Object(V["a"])({},Object(J["b"])({blockchainSession:"blockchain/sessionId"})),{},{priceAsLuna:function(){return(this.price/1e6).toFixed(6)}})},X=n("6b0d"),ee=n.n(X),te=n("6ac0"),ne=n("f09f"),re=n("0016"),ie=n("eb85"),ae=n("9c40"),ce=n("2c91"),oe=n("27f9"),se=n("74f7"),ue=n("cf57"),le=n("93dc"),de=n.n(le);const he=ee()(Z,[["render",M]]);t["default"]=he;de()(Z,"components",{QVideo:te["a"],QCard:ne["a"],QIcon:re["a"],QSeparator:ie["a"],QBtn:ae["a"],QSpace:ce["a"],QInput:oe["a"],QInnerLoading:se["a"],QSpinnerGears:ue["a"]})},d188:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("1da1"),i=n("d4ec"),a=n("bee2"),c=(n("96cf"),n("b0c0"),n("ac1f"),n("1276"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("a630"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("a15b"),n("d81d"),n("4d90"),n("25f0"),n("b680"),n("fb6a"),n("50b2")),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filename,r=void 0===n?"":n,a=t.size,c=void 0===a?0:a,o=t.fileSet,s=void 0===o?null:o,u=t.file,l=void 0===u?null:u,d=t.url,h=void 0===d?null:d,p=t.thumbBlob,b=void 0===p?null:p,f=t.mp4,m=void 0===f?null:f,v=t.nInMp4,g=void 0===v?null:v,j=t.meta,O=void 0===j?"":j;if(Object(i["a"])(this,e),Object.assign(this,{filename:r,size:c,fileSet:s,file:l,url:h,thumbBlob:b,mp4:m,nInMp4:g,meta:O}),this.humanSize="",this.file&&(this.filename||(this.filename=this.file.name),this.size||(this.size=this.file.size)),this.url&&(this.filename||(this.filename=(""+this.url).split(/[\\/]/).pop())),this.id||(this.id=""+Math.random()),!this.filename)throw new Error("Can not get filename for UserFile");var w=/(?:\.([^.]+))?$/;this.ext=(""+w.exec(this.filename)[1]).toLowerCase(),this.composeHumanSize(),this.mediaWidth=null,this.mediaHeight=null,this.mediaDuration=null,this.blobUrl=null,this.thumbURL=null,this.isSelected=!1,this._hash=null}return Object(a["a"])(e,[{key:"log",value:function(e){console.log("UserFile | "+e)}},{key:"getMediaWidth",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mediaWidth){e.next=3;break}return e.next=3,this.prepare();case 3:return e.abrupt("return",this.mediaWidth);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMediaHeight",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mediaHeight){e.next=3;break}return e.next=3,this.prepare();case 3:return e.abrupt("return",this.mediaHeight);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMediaDuration",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mediaDuration){e.next=3;break}return e.next=3,this.prepare();case 3:return e.abrupt("return",this.mediaDuration);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getThumbBlob",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.thumbBlob){e.next=2;break}return e.abrupt("return",this.thumbBlob);case 2:return e.next=4,this.prepare();case 4:return e.abrupt("return",this.thumbBlob);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBlobURL",value:function(){return this.blobUrl||(this.blobUrl=URL.createObjectURL(this.file)),this.blobUrl}},{key:"toContainer",value:function(){var e=new c["a"]({containerUserFile:this});return e}},{key:"hash",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this._hash){e.next=2;break}return e.abrupt("return",this._hash);case 2:return t=new FileReader,t.readAsArrayBuffer(this.file),e.next=6,new Promise((function(e){t.onloadend=function(){var n=crypto.subtle.digest("SHA-256",t.result);n.then((function(t){var n=Array.from(new Uint8Array(t)),r=n.map((function(e){return e.toString(16).padStart(2,"0")})).join("");e(r)}))}}));case 6:return n=e.sent,this._hash=n,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"prepare",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.thumbBlob||!this.file&&!this.url){e.next=4;break}return e.next=3,this.getThumbURL();case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"composeHumanSize",value:function(){var e=Math.floor(Math.log(this.size)/Math.log(1024));this.humanSize=1*(this.size/Math.pow(1024,e)).toFixed(0)+" "+["B","kB","MB","GB","TB"][e]}},{key:"download",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.file,t||!this.mp4){e.next=8;break}return e.next=4,this.mp4.extractFile(this.nInMp4);case 4:return n=e.sent,e.next=7,n.toBlob();case 7:t=e.sent;case 8:return r=new Response(t,{"Content-Type":"video/mp4","Content-Disposition":"attachment"}),e.next=11,r.blob();case 11:i=e.sent,a=window.URL.createObjectURL(i),c=document.createElement("a"),c.href=a,c.download=this.filename,document.body.appendChild(c),c.innerHTML="download",c.style.display="none",c.click(),c.remove(),window.URL.revokeObjectURL(a);case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fromURL",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.log("creating from url... "+this.url),e.next=3,fetch(this.url);case 3:return t=e.sent,e.next=6,t.blob();case 6:n=e.sent,this.size=n.size,this.composeHumanSize(),this.log("created from url, size = "+this.humanSize),this.file=n;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getThumbURL",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.file||!this.url){e.next=3;break}return e.next=3,this.fromURL();case 3:if(!this.thumbURL){e.next=5;break}return e.abrupt("return",this.thumbURL);case 5:if(this.log("generating preview image..."),this.file){e.next=9;break}return this.log("no data to use"),e.abrupt("return",null);case 9:if(t=["png","jpg","jpeg"],n=["mp4","mpeg","avi","mov","webm"],-1===t.indexOf(this.ext)){e.next=23;break}return e.prev=12,e.next=15,this.generateImagePreview();case 15:this.thumbURL=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](12),console.error(e.t0);case 21:e.next=38;break;case 23:if(-1===n.indexOf(this.ext)){e.next=38;break}return r=null,e.prev=25,e.next=28,this.generateVideoPreview();case 28:r=e.sent,this.thumbURL=""+r,e.next=37;break;case 32:e.prev=32,e.t1=e["catch"](25),this.log("ERROR : "+e.t1),console.log(this.file),r=null;case 37:this.thumbURL&&(this.meta=Math.floor(this.mediaDuration/60)+":"+("0"+this.mediaDuration%60).slice(-2));case 38:case"end":return e.stop()}}),e,this,[[12,18],[25,32]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateImagePreview",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Image,n=URL.createObjectURL(this.file),e.next=4,new Promise((function(e,i){t.onload=function(){r.mediaWidth=t.width,r.mediaHeight=t.height,r.meta=t.width+"x"+t.height;var n=document.createElement("canvas"),a=r.mediaWidth>r.mediaHeight?r.mediaWidth/r.mediaHeight*200:200,c=r.mediaWidth>r.mediaHeight?200:r.mediaHeight/r.mediaWidth*200;n.width=a,n.height=c;var o=n.getContext("2d");o.imageSmoothingEnabled=!0,o.drawImage(t,0,0,a,c);var s=document.createElement("canvas");s.width=a,s.height=c,n.toDataURL()==s.toDataURL()&&i(),n.toBlob((function(t){r.thumbBlob=t;var n=URL.createObjectURL(t);e(n)}))},t.onerror=function(){i()},t.src=n}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateVideoPreview",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.log("generating video preview..."),t=document.createElement("video"),n=URL.createObjectURL(this.file),this.log(n),e.next=6,new Promise((function(e,i){t.addEventListener("error",(function(e){console.error(e),i()}),!0),t.onloadeddata=function(){r.log("generating video preview, video loaded");var n=t.videoWidth,a=t.videoHeight;r.mediaWidth=n,r.mediaHeight=a,r.mediaDuration=t.duration;var c=r.mediaWidth>r.mediaHeight?r.mediaWidth/r.mediaHeight*200:200,o=r.mediaWidth>r.mediaHeight?200:r.mediaHeight/r.mediaWidth*200,s=document.createElement("canvas");s.width=c,s.height=o;var u=s.getContext("2d");u.imageSmoothingEnabled=!0,u.drawImage(t,0,0,c,o);var l=document.createElement("canvas");l.width=c,l.height=o,s.toDataURL()==l.toDataURL()&&i(),s.toBlob((function(t){r.thumbBlob=t;var n=URL.createObjectURL(t);r.log("generated video preview."),e(n)}))},t.preload="metadata",t.src=n,t.muted=!0,t.playsInline=!0,t.play()}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cleanUp",value:function(){this.thumbURL&&URL.revokeObjectURL(this.thumbURL)}}]),e}()},d433:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["k"])("h6",null,"All Minted",-1),a={key:2,class:"rounded-borders q-pa-md q-my-md bg-light-blue-1 q-card--bordered"},c=Object(r["m"])("Move mouse over to preload thumbs. Click to go to the watch page "),o={class:"q-pa-md row items-start q-gutter-md"},s=Object(r["k"])("div",{class:"absolute-bottom text-subtitle2 text-center token_address"}," Loading... ",-1);function u(e,t,n,u,l,d){var h=Object(r["L"])("CryptoAuth"),p=Object(r["L"])("q-toggle"),b=Object(r["L"])("q-icon"),f=Object(r["L"])("q-img"),m=Object(r["L"])("q-card"),v=Object(r["L"])("MintedToken");return Object(r["E"])(),Object(r["j"])("div",null,[i,l.connected?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(h,{key:0,onLoaded:d.providerLoaded,ref:"cryptoAuth"},null,8,["onLoaded"])),l.connected?(Object(r["E"])(),Object(r["h"])(p,{key:1,label:"Show yours only",modelValue:l.yours,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.yours=e})},null,8,["modelValue"])):Object(r["i"])("",!0),l.loaded?(Object(r["E"])(),Object(r["j"])("div",a,[Object(r["n"])(b,{size:"20px",name:"info",color:"primary"}),c])):Object(r["i"])("",!0),Object(r["k"])("div",o,[l.loading?(Object(r["E"])(),Object(r["h"])(m,{key:0,class:"q-card my-card"},{default:Object(r["T"])((function(){return[Object(r["n"])(f,{fit:"cover",ratio:16/9},{default:Object(r["T"])((function(){return[s]})),_:1})]})),_:1})):Object(r["i"])("",!0),(Object(r["E"])(!0),Object(r["j"])(r["a"],null,Object(r["K"])(l.tokens,(function(e){return Object(r["E"])(),Object(r["h"])(m,{key:e,class:"q-card my-card"},{default:Object(r["T"])((function(){return[Object(r["n"])(v,{token:e},null,8,["token"])]})),_:2},1024)})),128))])])}var l=n("5530"),d=n("1da1"),h=(n("96cf"),n("5502")),p={class:"absolute-bottom text-subtitle2 text-center token_address"};function b(e,t,n,i,a,c){var o=Object(r["L"])("q-img");return Object(r["E"])(),Object(r["h"])(o,{src:c.thumbURLComputed,onMouseenter:c.mouseenter,onClick:c.click,fit:"cover",ratio:16/9},{default:Object(r["T"])((function(){return[Object(r["k"])("div",p,Object(r["P"])(n.token),1)]})),_:1},8,["src","onMouseenter","onClick"])}n("d3b7"),n("a15b"),n("ac1f"),n("1276");var f={name:"MintedToken",props:{token:String},data:function(){return{thumbURL:null}},mounted:function(){},watch:{},methods:{mouseenter:function(){this.loadTheThumb()},click:function(){this.$router.push("/v/"+this.token)},loadTheThumb:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._initPromise){e.next=4;break}return e.next=3,this._initPromise;case 3:return e.abrupt("return",e.sent);case 4:return this._initPromiseResolver=null,this._initPromise=new Promise((function(e){a._initPromiseResolver=e})),t=new Request("https://ipfs.infura.io/ipfs/"+this.token),e.next=9,fetch(t);case 9:return n=e.sent,e.next=12,n.json();case 12:r=e.sent,console.error(r),i=r.image,this.thumbURL="https://ipfs.infura.io/ipfs/"+i.split("ipfs://").join(""),this._initPromiseResolver();case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{thumbURLComputed:function(){return this.thumbURL?this.thumbURL:"data:image/svg+xml,%3C%3Fxml version='1.0' %3F%3E%3Csvg height='443.88' id='svg1825' width='439.488' xmlns='http://www.w3.org/2000/svg' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cdefs id='defs1827'%3E%3Cmarker id='ArrowEnd' markerHeight='3' markerUnits='strokeWidth' markerWidth='4' orient='auto' refX='0' refY='5' viewBox='0 0 10 10'%3E%3Cpath d='M 0 0 L 10 5 L 0 10 z' id='path1830'/%3E%3C/marker%3E%3Cmarker id='ArrowStart' markerHeight='3' markerUnits='strokeWidth' markerWidth='4' orient='auto' refX='10' refY='5' viewBox='0 0 10 10'%3E%3Cpath d='M 10 0 L 0 5 L 10 10 z' id='path1833'/%3E%3C/marker%3E%3C/defs%3E%3Cg id='g1835'%3E%3Cg id='g1837'%3E%3Cpath d='M 219.744 443.88C 341.103 443.88 439.488 344.51 439.488 221.94C 439.488 99.368 341.103 0 219.744 0C 98.387 0 0 99.368 0 221.94C 0 344.51 98.387 443.88 219.744 443.88z' id='path1839' style='stroke:none; fill:%23000000'/%3E%3Cpath d='M 219.744 221.94' id='path1841' style='stroke:none; fill:%23000000'/%3E%3C/g%3E%3Cg id='g1843'%3E%3Cpath d='M 219.744 392.714C 313.128 392.714 388.83 316.255 388.83 221.94C 388.83 127.623 313.128 51.166 219.744 51.166C 126.362 51.166 50.659 127.623 50.659 221.94C 50.659 316.255 126.362 392.714 219.744 392.714z' id='path1845' style='stroke:none; fill:%23ffffff'/%3E%3Cpath d='M 219.744 221.94' id='path1847' style='stroke:none; fill:%23ffffff'/%3E%3C/g%3E%3Cg id='g1849'%3E%3Cpath d='M 196.963 300.274L 246.494 300.172L 246.494 261.69C 246.494 251.252 251.36 241.39 264.38 232.849C 277.399 224.312 313.744 206.988 313.744 161.44C 313.744 115.89 275.577 84.582 243.494 77.94C 211.416 71.298 176.659 75.668 151.994 102.69C 129.907 126.887 125.253 146.027 125.253 188.255L 174.744 188.255L 174.744 178.44C 174.744 155.939 177.347 132.186 209.494 125.69C 227.04 122.144 243.488 127.648 253.244 137.19C 264.404 148.102 264.494 172.69 246.711 184.933L 218.815 203.912C 202.543 214.35 196.963 225.971 196.963 243.051L 196.963 300.274z' id='path1851' style='stroke:none; fill:%23000000'/%3E%3Cg id='g1853'%3E%3Cpath d='M 196.638 370.692L 196.638 319.687L 246.85 319.687L 246.85 370.692L 196.638 370.692z' id='path1855' style='stroke:none; fill:%23000000'/%3E%3Cpath d='M 221.744 345.19' id='path1857' style='stroke:none; fill:%23000000'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E"}}},m=(n("0d60"),n("6b0d")),v=n.n(m),g=n("068f"),j=n("93dc"),O=n.n(j);const w=v()(f,[["render",b],["__scopeId","data-v-506591ce"]]);var k=w;O()(f,"components",{QImg:g["a"]});var y=n("9346"),x={name:"All Minted",path:"/allminted",title:"Minted NFTs",authRequired:!1,props:{},components:{MintedToken:k,CryptoAuth:y["a"]},data:function(){return{isActive:!1,tokens:[],loaded:!1,loading:!1,connected:!1,yours:!1}},watch:{blockchainSession:function(){this.checkTheBlockchain()},yours:function(){this.tokens=[],this.checkTheBlockchain()}},methods:{queryTheProvider:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,t.getAllTokens({mintedByConnected:this.yours,allContracts:!0});case 3:n=e.sent,n.tokens&&(this.tokens=n.tokens),this.loaded=!0,this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),providerLoaded:function(e){this.queryTheProvider(e)},checkTheBlockchain:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$store.getters["blockchain/provider"],!t){e.next=6;break}return this.connected=!0,e.next=5,this.queryTheProvider(t);case 5:return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.checkTheBlockchain().then((function(t){t||e.$refs.cryptoAuth.requestTerra()}))},computed:Object(l["a"])({},Object(h["b"])({blockchainSession:"blockchain/sessionId"}))},R=n("9564"),_=n("f09f"),P=n("0016");const T=v()(x,[["render",u]]);t["default"]=T;O()(x,"components",{QToggle:R["a"],QCard:_["a"],QIcon:P["a"],QImg:g["a"]})},dd1a:function(e,t,n){"use strict";n("c52f")},dde6:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["k"])("h6",null,"Prepared Mints",-1),a={class:"rounded-borders q-pa-md q-my-md bg-light-blue-1 q-card--bordered"},c=Object(r["m"])("We do not store your prepared mints"),o=Object(r["k"])("p",null,"Note that everything you see on this page is stored in your browser cache. We respect your privacy and do not store any data about you neither your media files.",-1),s=Object(r["m"])("You are free to download encoded media, store it on your local machine and decode any time you want on "),u=Object(r["m"])("decode page"),l=Object(r["m"])("."),d=Object(r["k"])("p",null,"Publish your media to Blockchain (Mint Media) to sell it as NFT and make money selling its private content to the audience.",-1),h={key:0,class:"rounded-borders q-pa-md q-my-md bg-negative q-card--bordered text-white"},p=Object(r["m"])(" You have no prepared mints. Ready to "),b=Object(r["m"])("create one"),f=Object(r["m"])("? "),m=Object(r["k"])("div",null,[Object(r["k"])("div",{class:"text-weight-bold"}," "),Object(r["k"])("div",{class:"text-grey"}," ")],-1),v=Object(r["k"])("div",{class:"q-ml-sm"},[Object(r["k"])("p",null,"You are sure that you want to remove this prepared mint?"),Object(r["k"])("p",null,"You can still use it for decoding if you downloaded the file and write down the password for it.")],-1);function g(e,t,n,g,j,O){var w=Object(r["L"])("q-icon"),k=Object(r["L"])("router-link"),y=Object(r["L"])("PreparedMint"),x=Object(r["L"])("q-video"),R=Object(r["L"])("q-linear-progress"),_=Object(r["L"])("q-space"),P=Object(r["L"])("q-btn"),T=Object(r["L"])("q-card-section"),C=Object(r["L"])("q-card"),S=Object(r["L"])("q-dialog"),L=Object(r["L"])("q-avatar"),B=Object(r["L"])("q-card-actions"),U=Object(r["L"])("MP4StegAsync"),A=Object(r["M"])("close-popup");return Object(r["E"])(),Object(r["j"])("div",null,[i,Object(r["k"])("div",a,[Object(r["k"])("h5",null,[Object(r["n"])(w,{size:"32px",name:"info",color:"red"}),c]),o,Object(r["k"])("p",null,[s,Object(r["n"])(k,{to:"/decode"},{default:Object(r["T"])((function(){return[u]})),_:1}),l]),d]),j.records.length?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",h,[p,Object(r["n"])(k,{to:"/encode",class:"text-white"},{default:Object(r["T"])((function(){return[b]})),_:1}),f])),(Object(r["E"])(!0),Object(r["j"])(r["a"],null,Object(r["K"])(j.records,(function(e){return Object(r["E"])(),Object(r["j"])("div",{key:e.id},[Object(r["n"])(y,{userContainer:e,onWatch:O.watch,onRemove:O.remove},null,8,["userContainer","onWatch","onRemove"])])})),128)),Object(r["n"])(S,{modelValue:j.showWatchDialog,"onUpdate:modelValue":t[0]||(t[0]=function(e){return j.showWatchDialog=e}),position:"bottom"},{default:Object(r["T"])((function(){return[Object(r["n"])(C,{style:{width:"900px","max-width":"80vw"}},{default:Object(r["T"])((function(){return[j.watchDialogVideoURL?(Object(r["E"])(),Object(r["h"])(x,{key:0,ratio:16/9,src:j.watchDialogVideoURL},null,8,["src"])):Object(r["i"])("",!0),Object(r["n"])(R,{value:.6,color:"pink"},null,8,["value"]),Object(r["n"])(T,{class:"row items-center no-wrap"},{default:Object(r["T"])((function(){return[m,Object(r["n"])(_),Object(r["n"])(P,{flat:"",round:"",icon:"fast_rewind"}),Object(r["n"])(P,{flat:"",round:"",icon:"pause"}),Object(r["n"])(P,{flat:"",round:"",icon:"fast_forward"})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(r["n"])(S,{modelValue:j.showSureRemove,"onUpdate:modelValue":t[1]||(t[1]=function(e){return j.showSureRemove=e})},{default:Object(r["T"])((function(){return[Object(r["n"])(C,null,{default:Object(r["T"])((function(){return[Object(r["n"])(T,{class:"row items-center"},{default:Object(r["T"])((function(){return[Object(r["n"])(L,{icon:"delete_forever",color:"primary","text-color":"white"}),v]})),_:1}),Object(r["n"])(B,{align:"right"},{default:Object(r["T"])((function(){return[Object(r["U"])(Object(r["n"])(P,{flat:"",label:"Cancel",color:"primary"},null,512),[[A]]),Object(r["U"])(Object(r["n"])(P,{label:"Yes, Remove It",color:"negative",onClick:O.doRemove},null,8,["onClick"]),[[A]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(r["n"])(U)])}n("a434");var j=n("7e7e"),O=n("e23a"),w=n("8b1f"),k={name:"Prepared",path:"/prepared",title:"Prepared Mints",authRequired:!1,props:{},components:{PreparedMint:O["a"],MP4StegAsync:w["a"]},data:function(){return{isActive:!1,records:[],showWatchDialog:!1,watchDialogVideoURL:null,showSureRemove:!1,sureRemoveId:null}},watch:{},methods:{watch:function(e){this.watchDialogVideoURL=e,this.showWatchDialog=!0},remove:function(e){this.showSureRemove=!0,this.sureRemoveId=e},doRemove:function(){for(var e=this.sureRemoveId,t=null,n=0;n<this.records.length;n++)this.records[n].id==e&&(t=n);if(null!==t){var r=this.records[t];this.records.splice(t,1),r.remove()}}},mounted:function(){var e=this,t=new j["a"];t.restore().then((function(){e.records=t.records}))}},y=n("6b0d"),x=n.n(y),R=n("f09f"),_=n("0016"),P=n("24e8"),T=n("6ac0"),C=n("6b1d"),S=n("a370"),L=n("2c91"),B=n("9c40"),U=n("cb32"),A=n("4b7e"),E=n("7f67"),I=n("93dc"),F=n.n(I);const D=x()(k,[["render",g]]);t["default"]=D;F()(k,"components",{QCard:R["a"],QIcon:_["a"],QDialog:P["a"],QVideo:T["a"],QLinearProgress:C["a"],QCardSection:S["a"],QSpace:L["a"],QBtn:B["a"],QAvatar:U["a"],QCardActions:A["a"]}),F()(k,"directives",{ClosePopup:E["a"]})},e11f:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("2909"),i=n("1da1"),a=n("d4ec"),c=n("bee2"),o=(n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d81d"),n("ac1f"),n("466d"),n("a15b"),n("a630"),n("3ca3"),n("4d90"),n("25f0"),n("fb6a"),n("96cf"),function(){function e(){Object(a["a"])(this,e),this._salt="testффф"}return Object(c["a"])(e,[{key:"videoKeyToPublicKey",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="30820122300d06092a864886f70d01010105000382010f003082010a0282010100a11e958b70dcdeb2bb6744a8cd15c50a165f003ee0b3854390e2820d4919a8cfb1f192ac269b7841df2297adf7f4b90345b6ac8c26578a2337183c73c902ff4187828b3d071b8ed56a8623dca5b5339587bc6caddeefc5ba50bddcbbd45ae45e0ba14316d17fa0fe2874c713487fdea79c1bc5746adceed5234e5f0309febb65b5c8db72ae06f8e732534e5293e81b71f09410925eef4778adb8f056d5d65ca392b6b2a68be340b00754b231c6af5eef55a4bc87a1017d1358a333f6d318bec95a97031a2fc2fd1060e4be0a18d61d67139cf25564c3aa634ba8b3a27f8cbf07acb4ce7b0de5b9ac526f4fb5883cefda7a7d2be11fdb918f9e0224c6ca5185dd0203010001",e.next=3,crypto.subtle.importKey("spki",this.hex2u8a(n),{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]);case 3:return r=e.sent,i=this.hex2u8a(t),console.log("valueMaterial",i),e.next=8,crypto.subtle.encrypt("RSA-OAEP",r,i);case 8:return a=e.sent,e.abrupt("return",{token_key:this.buf2hex(a),token_key_version:1});case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"testVideoKeyToPublicKey",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,c,o,s,u,l,d,h,p,b,f,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="30820122300d06092a864886f70d01010105000382010f003082010a0282010100a11e958b70dcdeb2bb6744a8cd15c50a165f003ee0b3854390e2820d4919a8cfb1f192ac269b7841df2297adf7f4b90345b6ac8c26578a2337183c73c902ff4187828b3d071b8ed56a8623dca5b5339587bc6caddeefc5ba50bddcbbd45ae45e0ba14316d17fa0fe2874c713487fdea79c1bc5746adceed5234e5f0309febb65b5c8db72ae06f8e732534e5293e81b71f09410925eef4778adb8f056d5d65ca392b6b2a68be340b00754b231c6af5eef55a4bc87a1017d1358a333f6d318bec95a97031a2fc2fd1060e4be0a18d61d67139cf25564c3aa634ba8b3a27f8cbf07acb4ce7b0de5b9ac526f4fb5883cefda7a7d2be11fdb918f9e0224c6ca5185dd0203010001",r="308204bd020100300d06092a864886f70d0101010500048204a7308204a30201000282010100a11e958b70dcdeb2bb6744a8cd15c50a165f003ee0b3854390e2820d4919a8cfb1f192ac269b7841df2297adf7f4b90345b6ac8c26578a2337183c73c902ff4187828b3d071b8ed56a8623dca5b5339587bc6caddeefc5ba50bddcbbd45ae45e0ba14316d17fa0fe2874c713487fdea79c1bc5746adceed5234e5f0309febb65b5c8db72ae06f8e732534e5293e81b71f09410925eef4778adb8f056d5d65ca392b6b2a68be340b00754b231c6af5eef55a4bc87a1017d1358a333f6d318bec95a97031a2fc2fd1060e4be0a18d61d67139cf25564c3aa634ba8b3a27f8cbf07acb4ce7b0de5b9ac526f4fb5883cefda7a7d2be11fdb918f9e0224c6ca5185dd0203010001028201000d22b030791818b3dba174b08a5fcefb9e8d4a38d61aecaf707d76fadc4dd23c74966c4dcaabfc26eaa928528f978d09de4221591fbb1d50f7a9eb2bc9648c28ec825115bda19a887db1c7f4b231ceadcf2e26721a6dd3e1f7b932e8c14c53b7f31cc79a71a4051d137149d5a1a08327890b9e927a2fdeecd37f0d31f33ba84d6646398af0cd5917365aa35135ac6efb97785004b991242bad8178481d9ca38f4c8b8bb4eb85abe784c651a86990b0155e5d12b6cfa0e717aa3be96b8061590bebc8f19d3f4a3fd0a0a8bd226c29070ecd642f2a69f5405572c340b8781c8b37ccb4abb1e3e6c0b4ec9ff8c716c68d759d85e8b8b98e0e385c3c0b7c57502ec502818100dc3fb132e237baeccd7d7be7963ceb8facd78b70c752936e4580fd97999ce9cbea60859e55e3b601a63d0b120293a082b88335509a3c343cb6d173b8eae749819932c8bc7dc712659d9b223936c0b73d30985f6af00cb70729798600a954fc36dd18d566fe378cd13542de5be84cd76bc4784dd0f92f89df965853edb18f857f02818100bb45ced2ae6cc92393f0e89be9218c8bf388cc60549688f9b36f64d91d0b71998259537be9057667a07d41835de7a193edd7ee0ac9438c8f7726248117404a6edc533f6341fcb9e5b8a21d38bea779d0f03e17456fe436ee8d304e152bfb53a4040d3870cae4e92b8b54b7ec5b331d5c069575269bed0f181f99bafb2c2f7aa302818100909a70a8cbc573408e19d903cfabe7acc8fa2b5ebc3f06f4db45393a136ce6432f7a77bfe0fc443f08fa030eac0a68d3ea789ac474bf1a3cd27ae9d37ac6a7882321289238b23eede0703e23fa42c50bb3a016e58afd8e1d71a98bc55b67a4c010a1815ac1858f3abc114f14608c32d35a86f1f045ea64471bda9a1ff0f81dd902818069b47d896deaf99d9b63dfe8212f4ea5b051070b58b39f9d522b0e417ea376fbaf17bc87b47fe0d59d4116399047ae6c5154108906119ac55ffba79f36009402ff59fded88d19e1c8c9af4e392b9f5887a1292101f98316975484ecaa488b82d5c1c1a3f9046a5566ecee3020678539a1e1d3e830c804284db516ab95bb77101028180048bdad7253331837934ca248cac74b7df10c2dad564138a5fa4f2096174d039fcbffaded5738ee419d48baeccd48b5c8adbb6a1289fe34c9d5d84a6bc0c8cc2a898f3aabfd8640b3b1277078e88357e653c8ecc4ebd625bd1ec51e17ac5c3d3e6d7fbf1bb9b4c8b4417b898fe11577acfccabe4c35fec04d147de87f1764a7b",e.next=4,crypto.subtle.importKey("spki",this.hex2u8a(n),{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]);case 4:return i=e.sent,a=this.hex2u8a("00020002"),e.next=8,crypto.subtle.encrypt("RSA-OAEP",i,a);case 8:return c=e.sent,console.log(c),console.log(this.buf2hex(c)),e.next=13,crypto.subtle.importKey("pkcs8",this.hex2u8a(r),{name:"RSA-OAEP",hash:"SHA-256"},!1,["decrypt"]);case 13:return o=e.sent,console.log(o),e.next=17,crypto.subtle.decrypt("RSA-OAEP",o,c);case 17:if(s=e.sent,console.log(this.buf2hex(s)),console.log("was",this.u8a2hex(a)),n||r){e.next=41;break}return console.log(t),u="0000000000000000000000000000000000000000000000000000000000000003",l=this.hex2u8a(u),console.error(l,"privateKeyAsUintArray"),d=new Uint8Array([1,0,1]),h={name:"RSA-OAEP",modulusLength:2048,publicExponent:d,hash:"SHA-256"},p=!0,b=["encrypt","decrypt"],e.next=31,crypto.subtle.generateKey(h,p,b);case 31:return f=e.sent,console.error(f),e.next=35,crypto.subtle.exportKey("pkcs8",f.privateKey);case 35:return m=e.sent,console.error(this.buf2hex(m)),e.next=39,crypto.subtle.exportKey("spki",f.publicKey);case 39:v=e.sent,console.error(this.buf2hex(v));case 41:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"hex2u8a",value:function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))}},{key:"stringToSource",value:function(e){var t=new TextEncoder;return t.encode(e)}},{key:"u8a2hex",value:function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}},{key:"ab2string",value:function(e){var t=new TextDecoder;return t.decode(e)}},{key:"buf2hex",value:function(e){return Object(r["a"])(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}},{key:"importKey",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",this.stringToSource(t),"PBKDF2",!1,["deriveBits","deriveKey"]));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pbkdf2",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.importKey(t);case 2:return n=e.sent,e.next=5,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:this.stringToSource(this._salt),iterations:1e3,hash:"SHA-512"},n,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"encode",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=window.crypto.getRandomValues(new Uint8Array(16)),console.error("iv",r),e.next=4,this.pbkdf2(n);case 4:return i=e.sent,a=this.hex2u8a(t),e.next=8,window.crypto.subtle.encrypt({name:"AES-CBC",iv:r},i,a);case 8:return c=e.sent,console.error("iv string length",r.length,this.u8a2hex(r).length,this.u8a2hex(r)),e.abrupt("return",this.u8a2hex(r)+this.buf2hex(c));case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"decode",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.hex2u8a(t),i=r.slice(0,16),r=r.slice(16),console.log("iv restored",i,this.u8a2hex(i)),e.next=6,this.pbkdf2(n);case 6:return a=e.sent,e.next=9,window.crypto.subtle.exportKey("raw",a);case 9:return c=e.sent,console.log("pbkdf2Key",this.buf2hex(c)),console.log("encoded",r,this.u8a2hex(r)),e.prev=12,e.next=15,window.crypto.subtle.decrypt({name:"AES-CBC",iv:i},a,r);case 15:return o=e.sent,console.log("decoded",o),e.abrupt("return",this.buf2hex(o));case 20:e.prev=20,e.t0=e["catch"](12),console.error(e.t0);case 23:case"end":return e.stop()}}),e,this,[[12,20]])})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}())},e23a:function(e,t,n){"use strict";n("a4d3"),n("e01a");var r=n("7a23"),i=Object(r["m"])(" This is the public media, visible for everyone "),a=Object(r["m"])(" This is the hidden part, available to watch after the purchase "),c={key:0},o={class:"text-overline"},s=Object(r["m"])(" – you can download encoded MP4 file, minting to blockchain is not required "),u={class:"text-overline"},l={class:"non-selectable"},d=Object(r["m"])(" Password: "),h=Object(r["k"])("p",null,"Password is the KEY private content encoded inside NFT",-1),p=Object(r["k"])("p",null,"The only case you need a password, if you don't want to mint encoded data as NFT and prefer to store it on your computer, so nobody can purchase it.",-1),b=Object(r["k"])("p",null,[Object(r["m"])("It would be all your private media, and you can decode anytime on "),Object(r["k"])("b",null,"Decode"),Object(r["m"])(" page with password.")],-1),f={key:1},m={class:"text-h5 q-mb-xs"},v={class:"text-h5 q-mb-xs"},g={class:"text-caption text-grey"},j={key:0,class:"q-py-md"},O=Object(r["k"])("div",{class:"text-overline"},"IPFS",-1),w={class:"q-tr--no-hover"},k={class:"text-left"},y=["href"],x=Object(r["k"])("td",{class:"text-left"},"JSON",-1),R={class:"q-tr--no-hover"},_={class:"text-left"},P=["href"],T=Object(r["k"])("td",{class:"text-left"},"Thumb Image",-1),C={class:"q-tr--no-hover"},S={class:"text-left"},L=["href"],B=Object(r["k"])("td",{class:"text-left"},"Content",-1),U={key:1,class:"q-py-md"},A=Object(r["k"])("thead",null,[Object(r["k"])("tr",null,[Object(r["k"])("th",{class:"text-left"}," "),Object(r["k"])("th",{class:"text-right"},"Size"),Object(r["k"])("th",{class:"text-right"},"Length"),Object(r["k"])("th",{class:"text-right"},"Resolution")])],-1),E={class:"q-tr--no-hover"},I=Object(r["k"])("td",{class:"text-left"},"Public",-1),F={class:"text-right"},D={class:"text-right"},H={class:"text-right"},q={class:"q-tr--no-hover"},M=Object(r["k"])("td",{class:"text-left"},"Private",-1),V={class:"text-right"},z={class:"text-right"},W={class:"text-right"},K={class:"q-tr--no-hover"},Q=Object(r["k"])("td",{class:"text-left"},"Encoded Size",-1),$={class:"text-right"},N=Object(r["k"])("td",{class:"text-right"}," ",-1),G=Object(r["k"])("td",{class:"text-right"}," ",-1),Y={class:"q-mb-xs text-grey"},J=Object(r["k"])("div",{class:"text-overline"},"Price To Watch Private Media (in $LUNA) – you will be able to adjust it after the mint",-1);function Z(e,t,n,Z,X,ee){var te=Object(r["L"])("q-tooltip"),ne=Object(r["L"])("q-icon"),re=Object(r["L"])("q-img"),ie=Object(r["L"])("q-card-section"),ae=Object(r["L"])("q-btn"),ce=Object(r["L"])("q-separator"),oe=Object(r["L"])("q-input"),se=Object(r["L"])("q-markup-table"),ue=Object(r["L"])("q-item-section"),le=Object(r["L"])("q-slider"),de=Object(r["L"])("q-item"),he=Object(r["L"])("q-card-actions"),pe=Object(r["L"])("q-card");return Object(r["E"])(),Object(r["h"])(pe,{class:"prepared_mint",flat:"",bordered:""},{default:Object(r["T"])((function(){return[Object(r["n"])(ie,{horizontal:""},{default:Object(r["T"])((function(){return[Object(r["n"])(ie,{class:"col-3 flex"},{default:Object(r["T"])((function(){return[Object(r["n"])(re,{src:X.publicThumbBlobURL,fit:"cover","spinner-color":"primary","spinner-size":"82px",class:"rounded-borders","img-class":"mint_img",loading:"lazy",style:{"max-width":"300px",height:"300px",width:"300px"},onClick:ee.watchPublic},{default:Object(r["T"])((function(){return[Object(r["n"])(ne,{class:"absolute all-pointer-events",size:"32px",name:"visibility",color:"white",style:{top:"8px",right:"8px"}},{default:Object(r["T"])((function(){return[Object(r["n"])(te,null,{default:Object(r["T"])((function(){return[i]})),_:1})]})),_:1}),Object(r["n"])(ne,{tag:"span",class:"absolute all-pointer-events absolute-center",size:"64px",name:"play_circle",color:"white"})]})),_:1},8,["src","onClick"])]})),_:1}),Object(r["n"])(ie,{class:"col-3 flex"},{default:Object(r["T"])((function(){return[Object(r["n"])(re,{src:X.privateThumbURL,fit:"cover","spinner-color":"primary","spinner-size":"82px",class:"rounded-borders","img-class":"mint_img",loading:"lazy",style:{"max-width":"300px",height:"300px",width:"300px"},onClick:ee.watchPrivate},{default:Object(r["T"])((function(){return[Object(r["n"])(ne,{class:"absolute all-pointer-events",size:"32px",name:"lock",color:"white",style:{top:"8px",right:"8px"}},{default:Object(r["T"])((function(){return[Object(r["n"])(te,null,{default:Object(r["T"])((function(){return[a]})),_:1})]})),_:1}),Object(r["n"])(ne,{tag:"span",class:"absolute all-pointer-events absolute-center",size:"64px",name:"play_circle",color:"white"})]})),_:1},8,["src","onClick"])]})),_:1}),Object(r["n"])(ie,{class:"q-pt-xs col-6 flex"},{default:Object(r["T"])((function(){return[Object(r["k"])("div",null,[n.displayAsMinted?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",c,[Object(r["k"])("div",o,[Object(r["n"])(ae,{size:"sm",color:"primary",icon:"download",label:"Download",loading:X.downloading,onClick:ee.download},null,8,["loading","onClick"]),s]),Object(r["k"])("div",u,[Object(r["k"])("span",l,[d,Object(r["n"])(te,null,{default:Object(r["T"])((function(){return[h,p,b]})),_:1})]),X.showPassword?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(ae,{key:0,size:"xs",flat:"",round:"",color:"primary",icon:"visibility",onClick:t[0]||(t[0]=function(e){X.showPassword=!0})})),X.showPassword?(Object(r["E"])(),Object(r["j"])("span",f,Object(r["P"])(X.password),1)):Object(r["i"])("",!0)]),Object(r["n"])(ce)])),Object(r["k"])("div",m,[Object(r["n"])(oe,{borderless:"",modelValue:X.title,"onUpdate:modelValue":t[1]||(t[1]=function(e){return X.title=e}),label:"Title",disable:!!X.mintIpfsHash||n.displayAsMinted},null,8,["modelValue","disable"])]),Object(r["k"])("div",v,[Object(r["n"])(oe,{disable:!!X.mintIpfsHash||n.displayAsMinted,modelValue:X.description,"onUpdate:modelValue":t[2]||(t[2]=function(e){return X.description=e}),filled:"",type:"textarea",label:"Description",autogrow:"",borderless:""},null,8,["disable","modelValue"])]),Object(r["k"])("div",g,[X.mintIpfsHash?(Object(r["E"])(),Object(r["j"])("div",j,[O,Object(r["n"])(se,{separator:"none",flat:"",dense:""},{default:Object(r["T"])((function(){return[Object(r["k"])("tbody",null,[Object(r["k"])("tr",w,[Object(r["k"])("td",k,[Object(r["k"])("a",{href:"https://ipfs.infura.io/ipfs/"+X.mintIpfsHash,target:"_blank"},Object(r["P"])(X.mintIpfsHash),9,y)]),x]),Object(r["k"])("tr",R,[Object(r["k"])("td",_,[Object(r["k"])("a",{href:"https://ipfs.infura.io/ipfs/"+X.publicThumbIpfsHash,target:"_blank"},Object(r["P"])(X.publicThumbIpfsHash),9,P)]),T]),Object(r["k"])("tr",C,[Object(r["k"])("td",S,[Object(r["k"])("a",{href:"https://ipfs.infura.io/ipfs/"+X.ipfsHash,target:"_blank"},Object(r["P"])(X.ipfsHash),9,L)]),B])])]})),_:1})])):Object(r["i"])("",!0),X.prepared?(Object(r["E"])(),Object(r["j"])("div",U,[Object(r["n"])(se,{separator:"none",flat:"",bordered:""},{default:Object(r["T"])((function(){return[A,Object(r["k"])("tbody",null,[Object(r["k"])("tr",E,[I,Object(r["k"])("td",F,Object(r["P"])(n.userContainer.getPublicSizeHuman()),1),Object(r["k"])("td",D,Object(r["P"])(n.userContainer.getPublicDurationHuman()),1),Object(r["k"])("td",H,Object(r["P"])(n.userContainer.getPublicResolution()),1)]),Object(r["k"])("tr",q,[M,Object(r["k"])("td",V,Object(r["P"])(n.userContainer.getPrivateSizeHuman()),1),Object(r["k"])("td",z,Object(r["P"])(n.userContainer.getPrivateDurationHuman()),1),Object(r["k"])("td",W,Object(r["P"])(n.userContainer.getPrivateResolution()),1)]),Object(r["k"])("tr",K,[Q,Object(r["k"])("td",$,Object(r["P"])(n.userContainer.getEncodedSizeHuman()),1),N,G])])]})),_:1})])):Object(r["i"])("",!0)])])]})),_:1})]})),_:1}),Object(r["n"])(ce),Object(r["n"])(ie,{horizontal:"",class:"row"},{default:Object(r["T"])((function(){return[Object(r["n"])(ie,{class:"col-12"},{default:Object(r["T"])((function(){return[Object(r["k"])("div",Y,[J,Object(r["n"])(de,null,{default:Object(r["T"])((function(){return[Object(r["n"])(ue,{avatar:""},{default:Object(r["T"])((function(){return[Object(r["n"])(ne,{color:"yellow-10",name:"nightlight"})]})),_:1}),Object(r["n"])(ue,null,{default:Object(r["T"])((function(){return[Object(r["n"])(le,{modelValue:X.price,"onUpdate:modelValue":t[3]||(t[3]=function(e){return X.price=e}),min:X.minimumPrice,max:.1,step:.001,label:"",color:"yellow-10"},null,8,["modelValue","min","max","step"])]})),_:1})]})),_:1})])]})),_:1})]})),_:1}),Object(r["n"])(ce),Object(r["n"])(he,{class:"justify-around"},{default:Object(r["T"])((function(){return[X.ipfsAvailable?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(ae,{key:0,flat:"",color:"info",icon:"info",label:"Connect to Blockchain",onClick:ee.scrollToConnect},null,8,["onClick"])),X.ipfsHash&&X.mintIpfsHash?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(ae,{key:1,flat:"",color:"primary",icon:"upload",disable:!X.ipfsAvailable,label:"Upload to IPFS",loading:X.uploading,onClick:ee.upload},null,8,["disable","loading","onClick"])),X.haveToChangePriceOnBlockchain?(Object(r["E"])(),Object(r["h"])(ae,{key:2,flat:"",color:"green",icon:"price_change",disable:!X.priceChangeAvailable,label:"Commit Price Change",onClick:ee.commitPriceChange},null,8,["disable","onClick"])):Object(r["i"])("",!0),X.isMinted?(Object(r["E"])(),Object(r["h"])(ae,{key:3,flat:"",type:"a",to:ee.watchURL,color:"primary",icon:"open_in_new",label:"Watch Page"},null,8,["to"])):Object(r["i"])("",!0),X.mintIpfsHash&&!X.isMinted?(Object(r["E"])(),Object(r["h"])(ae,{key:4,flat:"",color:"green",icon:"bookmark",disable:!X.mintAvailable,label:"Mint",onClick:ee.mint,loading:X.minting},null,8,["disable","onClick","loading"])):Object(r["i"])("",!0),n.displayAsMinted?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["h"])(ae,{key:5,flat:"",disable:!!X.isMinted,color:"negative",icon:"delete",label:"Remove",onClick:ee.remove},null,8,["disable","onClick"]))]})),_:1})]})),_:1})}var X=n("5530"),ee=n("1da1"),te=(n("96cf"),n("5502")),ne=n("e11f"),re={name:"PreparedMint",props:{userContainer:Object,displayAsMinted:Boolean},emits:["watch","remove"],data:function(){return{showPassword:!1,title:"",description:"",privateThumbURL:"",publicThumbBlobURL:null,dialog:!0,downloading:!1,password:null,uploading:!1,prepared:!1,ipfsHash:null,mintIpfsHash:null,publicThumbIpfsHash:null,ipfsAvailable:!1,mintAvailable:!1,minting:!1,isMinted:!1,price:.01,priceChangeAvailable:!1,haveToChangePriceOnBlockchain:!1,commitingPriceChange:!1,minimumPrice:0,contractAddress:null}},mounted:function(){this.prepare(),this.checkMintAvailable()},watch:{price:function(){var e=this;this.price!=this.userContainer.getPrice()&&(this.userContainer.setPrice(this.price),this._savePriceTimeout=setTimeout((function(){clearTimeout(e._savePriceTimeout),e.userContainer.setPrice(e.price,!0)}),1e3),this.isMinted&&(this.haveToChangePriceOnBlockchain=!0))},title:function(){this.userContainer.getTitle()!=this.title&&(this.mintIpfsHash=null,this.isMinted=!1),this.userContainer.setTitle(this.title)},description:function(){this.userContainer.getDescription()!=this.description&&(this.mintIpfsHash=null,this.isMinted=!1),this.userContainer.setDescription(this.description)},blockchainSession:function(){this.checkMintAvailable()}},methods:{scrollToConnect:function(){window.scrollTo(0,0)},test:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new ne["a"],e.next=3,t.videoKeyToPublicKey(this.password);case 3:n=e.sent,console.error("encoded",n);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),commitPriceChange:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.commitingPriceChange=!0,t=this.$store.getters["blockchain/provider"],e.next=4,t.commitPriceChange(this.mintIpfsHash,this.price);case 4:this.haveToChangePriceOnBlockchain=!1,this.commitingPriceChange=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkMintAvailable:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$store.getters["blockchain/signedAddress"],t?(this.mintAvailable=!0,this.priceChangeAvailable=!0,this.ipfsAvailable=!0):(this.mintAvailable=!1,this.priceChangeAvailable=!1,this.ipfsAvailable=!1),n=this.$store.getters["blockchain/provider"],!n){e.next=8;break}return this.contractAddress=n.contractAddress,e.next=7,n.getMinimumPrice();case 7:this.minimumPrice=e.sent;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mint:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.minting=!0,t=this.$store.getters["blockchain/provider"],e.next=4,this.userContainer.mintOn(t);case 4:n=e.sent,n||console.error("error minting"),this.isMinted=this.userContainer.getIsMinted(),this.minting=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),prepare:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.userContainer){e.next=18;break}return e.next=3,this.userContainer.getPrivateThumbBlobURL();case 3:return this.privateThumbURL=e.sent,e.next=6,this.userContainer.getPublicThumbBlobURL();case 6:return this.publicThumbBlobURL=e.sent,e.next=9,this.userContainer.getKeyAsHex();case 9:this.password=e.sent,this.ipfsHash=this.userContainer.getIPFSHash(),this.mintIpfsHash=this.userContainer.getMintIPFSHash(),this.publicThumbIpfsHash=this.userContainer.getPublicThumbIPFSHash(),this.title=this.userContainer.getTitle(),this.description=this.userContainer.getDescription(),this.isMinted=this.userContainer.getIsMinted(),this.price=this.userContainer.getPrice(),this.prepared=!0;case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watchPublic:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.userContainer.getPublicBlobURL();case 2:n=t.sent,e.$emit("watch",n);case 4:case"end":return t.stop()}}),t)})))()},watchPrivate:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.userContainer.getPrivateBlobURL();case 2:n=t.sent,e.$emit("watch",n);case 4:case"end":return t.stop()}}),t)})))()},download:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloading=!0,t.next=3,e.userContainer.download();case 3:e.downloading=!1;case 4:case"end":return t.stop()}}),t)})))()},storeIPFSOnApi:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={path:"/storeipfs",data:{hash:e.userContainer.id,key:e.userContainer.getKeyAsHex(),encodedIpfsHash:e.ipfsHash,mintIpfsHash:e.mintIpfsHash,publicThumbIpfsHash:e.publicThumbIpfsHash}},r=e.$store.dispatch("api/post",n),t.abrupt("return",r.success||!1);case 3:case"end":return t.stop()}}),t)})))()},upload:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.uploading=!0,t.next=3,e.userContainer.uploadToIPFS(e.contractAddress);case 3:return e.ipfsHash=e.userContainer.getIPFSHash(),e.mintIpfsHash=e.userContainer.getMintIPFSHash(),e.publicThumbIpfsHash=e.userContainer.getPublicThumbIPFSHash(),t.next=8,e.storeIPFSOnApi();case 8:e.uploading=!1;case 9:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.removing=!0,e.$emit("remove",e.userContainer.id),e.removing=!1;case 3:case"end":return t.stop()}}),t)})))()}},computed:Object(X["a"])(Object(X["a"])({},Object(te["b"])({blockchainSession:"blockchain/sessionId"})),{},{ipfsURL:function(){return"https://ipfs.infura.io/ipfs/".concat(this.ipfsHash)},watchURL:function(){return"/v/".concat(this.mintIpfsHash)}})},ie=(n("8dfb"),n("6b0d")),ae=n.n(ie),ce=n("f09f"),oe=n("a370"),se=n("068f"),ue=n("0016"),le=n("05c0"),de=n("9c40"),he=n("eb85"),pe=n("27f9"),be=n("2bb1"),fe=n("bd08"),me=n("66e5"),ve=n("4074"),ge=n("c1d0"),je=n("4b7e"),Oe=n("93dc"),we=n.n(Oe);const ke=ae()(re,[["render",Z]]);t["a"]=ke;we()(re,"components",{QCard:ce["a"],QCardSection:oe["a"],QImg:se["a"],QIcon:ue["a"],QTooltip:le["a"],QBtn:de["a"],QSeparator:he["a"],QInput:pe["a"],QMarkupTable:be["a"],QTr:fe["a"],QItem:me["a"],QItemSection:ve["a"],QSlider:ge["a"],QCardActions:je["a"]})},e34b:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["k"])("h6",null,"Minted",-1),a={class:"rounded-borders q-pa-md q-my-md bg-light-blue-1 q-card--bordered"},c=Object(r["m"])("List of NFTs already deployed to blockchain"),o={key:0,class:"rounded-borders q-pa-md q-my-md bg-negative q-card--bordered text-white"},s=Object(r["m"])(" You have no minted NFTs. Ready to "),u=Object(r["m"])("mint one"),l=Object(r["m"])("? ");function d(e,t,n,d,h,p){var b=Object(r["L"])("q-icon"),f=Object(r["L"])("h7"),m=Object(r["L"])("router-link"),v=Object(r["L"])("PreparedMint");return Object(r["E"])(),Object(r["j"])("div",null,[i,Object(r["k"])("div",a,[Object(r["n"])(f,null,{default:Object(r["T"])((function(){return[Object(r["n"])(b,{size:"22px",name:"info",color:"green"}),c]})),_:1})]),h.records.length?Object(r["i"])("",!0):(Object(r["E"])(),Object(r["j"])("div",o,[s,Object(r["n"])(m,{to:"/prepared",class:"text-white"},{default:Object(r["T"])((function(){return[u]})),_:1}),l])),(Object(r["E"])(!0),Object(r["j"])(r["a"],null,Object(r["K"])(h.records,(function(e){return Object(r["E"])(),Object(r["j"])("div",{key:e.id},[e.getIsMinted()?(Object(r["E"])(),Object(r["h"])(v,{key:0,userContainer:e,onWatch:p.watch,onRemove:p.remove,displayAsMinted:""},null,8,["userContainer","onWatch","onRemove"])):Object(r["i"])("",!0)])})),128))])}n("a434");var h=n("7e7e"),p=n("e23a"),b={name:"Minted",path:"/minted",title:"Minted NFTs",authRequired:!1,props:{},components:{PreparedMint:p["a"]},data:function(){return{isActive:!1,records:[],showWatchDialog:!1,watchDialogVideoURL:null,showSureRemove:!1,sureRemoveId:null}},watch:{},methods:{watch:function(e){this.watchDialogVideoURL=e,this.showWatchDialog=!0},remove:function(e){this.showSureRemove=!0,this.sureRemoveId=e},doRemove:function(){for(var e=this.sureRemoveId,t=null,n=0;n<this.records.length;n++)this.records[n].id==e&&(t=n);if(null!==t){var r=this.records[t];this.records.splice(t,1),r.remove()}}},mounted:function(){var e=this,t=new h["a"];t.restore().then((function(){e.records=t.records}))}},f=n("6b0d"),m=n.n(f),v=n("f09f"),g=n("0016"),j=n("93dc"),O=n.n(j);const w=m()(b,[["render",d]]);t["default"]=w;O()(b,"components",{QCard:v["a"],QIcon:g["a"]})},e8ae:function(e,t,n){"use strict";n("92a6")},fff6:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["k"])("h6",{class:"text-h6 q-mb-md text-primary"},"Decode Container",-1),a={class:"q-pa-md"},c={class:"q-gutter-md",style:{"max-width":"300px"}},o={class:"q-pa-md"},s=Object(r["k"])("div",{class:"text-h6 q-mb-md text-primary"},"Container",-1),u={key:0},l={class:"q-pa-md"},d={key:0},h={key:1},p={key:2},b={key:3},f=Object(r["k"])("div",{class:"text-h6 q-mb-md text-primary"},"Decoded",-1),m={key:0};function v(e,t,n,v,g,j){var O=Object(r["L"])("ContainerUploader"),w=Object(r["L"])("q-input"),k=Object(r["L"])("VideoPlayer"),y=Object(r["L"])("q-splitter"),x=Object(r["L"])("MP4StegAsync");return Object(r["E"])(),Object(r["j"])("div",null,[i,Object(r["n"])(O,{onContainer:j.containerUploaded},null,8,["onContainer"]),Object(r["k"])("div",a,[Object(r["k"])("div",c,[Object(r["n"])(w,{modelValue:g.decodeKey,"onUpdate:modelValue":t[0]||(t[0]=function(e){return g.decodeKey=e}),label:"Decode Key",onChange:j.decodeKeyChanged},null,8,["modelValue","onChange"])])]),Object(r["k"])("div",null,[Object(r["n"])(y,{modelValue:g.splitterModel,"onUpdate:modelValue":t[1]||(t[1]=function(e){return g.splitterModel=e}),style:{height:"400px"}},{before:Object(r["T"])((function(){return[Object(r["k"])("div",o,[s,g.containerBlob?(Object(r["E"])(),Object(r["j"])("div",u,[Object(r["n"])(k,{blob:g.containerBlob},null,8,["blob"])])):Object(r["i"])("",!0)])]})),after:Object(r["T"])((function(){return[Object(r["k"])("div",l,[g.decoding?(Object(r["E"])(),Object(r["j"])("div",d,"Trying to decode...")):Object(r["i"])("",!0),null===g.decodeSuccess?(Object(r["E"])(),Object(r["j"])("div",h,"Waiting for container and decode key...")):Object(r["i"])("",!0),!1===g.decodeSuccess?(Object(r["E"])(),Object(r["j"])("div",p,"Empty container or invalid decode key")):Object(r["i"])("",!0),!0===g.decodeSuccess?(Object(r["E"])(),Object(r["j"])("div",b,[f,g.decodedBlob?(Object(r["E"])(),Object(r["j"])("div",m,[Object(r["n"])(k,{blob:g.decodedBlob},null,8,["blob"])])):Object(r["i"])("",!0)])):Object(r["i"])("",!0)])]})),_:1},8,["modelValue"])]),Object(r["n"])(x)])}var g=n("1da1"),j=(n("96cf"),n("d3b7"),{class:"q-mt-md q-gutter-md text-center absolute-center"}),O=Object(r["k"])("h6",{class:"text-primary"},"Upload container .mp4 file",-1);function w(e,t,n,i,a,c){var o=Object(r["L"])("q-icon");return Object(r["E"])(),Object(r["j"])("div",{class:Object(r["w"])(["uploader text-center relative-position",{dragOver:a.isDragging}]),onClick:t[1]||(t[1]=function(){return c.uploadClick&&c.uploadClick.apply(c,arguments)}),onDragenter:t[2]||(t[2]=function(){return c.dragenter&&c.dragenter.apply(c,arguments)}),onDragover:t[3]||(t[3]=function(){return c.dragover&&c.dragover.apply(c,arguments)}),onDragleave:t[4]||(t[4]=function(){return c.dragleave&&c.dragleave.apply(c,arguments)}),onDrop:t[5]||(t[5]=function(){return c.drop&&c.drop.apply(c,arguments)})},[Object(r["k"])("input",{type:"file",onChange:t[0]||(t[0]=function(){return c.fileToUploadSelected&&c.fileToUploadSelected.apply(c,arguments)}),ref:"fileInput",accept:".mp4"},null,544),Object(r["k"])("div",j,[Object(r["n"])(o,{name:"cloud_upload",class:"text-primary",style:{"font-size":"64px"}}),O])],34)}var k=n("b85c"),y=n("a59c"),x={name:"ContainerUploader",data:function(){return{dragCounter:0,isDragging:!1}},methods:{uploadUserFile:function(e){console.log(e);var t=new y["a"]({file:e});this.$emit("container",t)},fileToUploadSelected:function(e){var t=e.target.files;if(t[0]){var n,r=Object(k["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.uploadUserFile(i)}}catch(a){r.e(a)}finally{r.f()}this.$refs.fileInput.value=null}},uploadClick:function(){this.$refs.fileInput.click()},drop:function(e){if(e.preventDefault(),this.isDragging=!1,e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var n=e.dataTransfer.items[t].getAsFile();this.uploadUserFile(n)}}else for(var r=0;r<e.dataTransfer.files.length;r++)this.uploadUserFile(e.dataTransfer.files[r])},dragenter:function(e){e.dataTransfer&&(this.isDragging=!0,e.stopPropagation(),e.preventDefault(),this.dragCounter++,e.dataTransfer.dropEffect="copy")},dragover:function(e){e.dataTransfer&&(this.isDragging=!0,e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")},dragleave:function(e){e.dataTransfer&&(this.dragCounter--,0===this.dragCounter&&(this.isDragging=!1))}}},R=(n("b8d3"),n("6b0d")),_=n.n(R),P=n("0016"),T=n("93dc"),C=n.n(T);const S=_()(x,[["render",w]]);var L=S;C()(x,"components",{QIcon:P["a"]});var B={key:0},U=["src"];function A(e,t,n,i,a,c){return Object(r["E"])(),Object(r["j"])("div",null,[a.videoAvailable?(Object(r["E"])(),Object(r["j"])("div",B,[Object(r["k"])("video",{src:a.videoSrc,controls:""},null,8,U)])):Object(r["i"])("",!0)])}n("3ca3"),n("ddb0"),n("2b3d"),n("9861");var E={name:"VideoPlayer",props:{blob:Object},data:function(){return{videoSrc:null,videoAvailable:!1}},watch:{blob:function(){this.prepareBlob()}},methods:{prepareBlob:function(){var e=URL.createObjectURL(this.blob);this.videoSrc=e,this.videoAvailable=!0}},computed:{},mounted:function(){this.prepareBlob()}};n("95af");const I=_()(E,[["render",A]]);var F=I,D=n("8b1f"),H={name:"Decode",title:"Decode Container",authRequired:!1,path:"/decode",components:{ContainerUploader:L,VideoPlayer:F,MP4StegAsync:D["a"]},props:{},data:function(){return{isActive:!1,splitterModel:50,containerBlob:null,container:null,decoding:!1,decodeKey:"",decodedBlob:null,decodeSuccess:null}},methods:{decodeKeyChanged:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.decoding=!0,e.decodedBlob=null,e.decodeSuccess=null,t.prev=3,t.next=6,e.container.decode(e.decodeKey);case 6:n=t.sent,console.error("decode",n),e.decodeSuccess=n,e.decodeSuccess&&(e.decodedBlob=e.container.decodedBlob),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),console.error(t.t0);case 15:e.decoding=!1;case 16:case"end":return t.stop()}}),t,null,[[3,12]])})))()},containerUploaded:function(e){this.container=e,this.decodeKey="",this.containerBlob=e.containerBlob,console.error(this.containerBlob)}},mounted:function(){}},q=n("27f9"),M=n("8562");const V=_()(H,[["render",v]]);t["default"]=V;C()(H,"components",{QInput:q["a"],QSplitter:M["a"]})}});